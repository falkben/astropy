


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>When to rebase and squash commits &#8212; Astropy v5.2.dev94+gb1133d712.d20220509</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Coding Guidelines" href="codeguide.html" />
    <link rel="prev" title="Try the development version" href="workflow/get_devel_version.html" />
  
  <meta name="robots" content="noindex, nofollow">
  
  
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>


  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="codeguide.html" title="Coding Guidelines">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="workflow/get_devel_version.html" title="Try the development version">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v5.2.dev94+gb1133d712.d20220509</a>
	 &#187;
      </li>
      
      <li>When to rebase and squash commits</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="when-to-rebase-and-squash-commits">
<h1>When to rebase and squash commits<a class="headerlink" href="#when-to-rebase-and-squash-commits" title="Permalink to this headline">¶</a></h1>
<p>This page describes recommendations for when to rebase pull requests and when to
combine/squash commits.</p>
<div class="section" id="when-to-remove-or-combine-squash-commits">
<h2>When to remove or combine/squash commits<a class="headerlink" href="#when-to-remove-or-combine-squash-commits" title="Permalink to this headline">¶</a></h2>
<p>Pull requests <strong>must</strong> be rebased and at least partially squashed (but not
necessarily squashed to a single commit) if large (approximately &gt;10KB)
non-source code files (e.g. images, data files, etc.) are added and then removed
or modified in the PR commit history (The squashing should remove all but the
last addition of the file to not use extra space in the repository).</p>
<p>Combining/squashing commits is <strong>encouraged</strong> when the number of commits
is excessive for the changes made. The definition of ‘excessive’ is
subjective, but in general one should attempt to have individual commits be
units of change, and not include reversions.
As a concrete example, for a change affecting &lt; 10 lines of source code and
including a changelog entry, more than a few commits would be excessive.
For a larger pull request adding significant functionality, however, more
commits may well be appropriate.</p>
<p>As another guideline, squashing should remove extraneous information but
should not be used to remove useful information for how a PR was developed.  For
example, 4 commits that are testing  changes and have a commit message of just
“debug” should be squashed.  But a series of commit messages that are
“Implemented feature X”, “added test for feature X”, “fixed bugs revealed by
tests for feature X” are useful information and should not be squashed away
without reason.</p>
<p>When squashing, extra care should be taken to keep authorship credit to all
individuals who provided substantial contribution to the given PR,
e.g. only squash commits made by the same author.</p>
<p>In all cases, be mindful of maintaining a welcoming environment and be helpful
with advice, especially for new contributors.  E.g., It is expected that a
maintainer offer to help a contributor who is a novice git user do any squashing
that that maintainer asks for, or do the squash themselves by directly pushing
to the PR branch.</p>
</div>
<div class="section" id="when-to-rebase">
<h2>When to rebase<a class="headerlink" href="#when-to-rebase" title="Permalink to this headline">¶</a></h2>
<p>Pull requests <strong>must</strong> be rebased (but not necessarily squashed to a single
commit) if at least one of the following conditions is met:</p>
<ul class="simple">
<li><p>There are conflicts with main</p></li>
<li><p>There are merge commits from upstream/main in the PR commit history (merge
commits from PRs to the user’s fork are fine)</p></li>
<li><p>There are commit messages include offensive language or violate the code of
conduct (in this case the rebase must also edit the commit messages)</p></li>
</ul>
</div>
<div class="section" id="github-squash-and-merge-button">
<h2>Github ‘Squash and Merge’ button<a class="headerlink" href="#github-squash-and-merge-button" title="Permalink to this headline">¶</a></h2>
<p>We should never use or enable the GitHub ‘Squash and Merge’ button since this
creates problems when dealing with identifying backports.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">When to rebase and squash commits</a><ul>
<li><a class="reference internal" href="#when-to-remove-or-combine-squash-commits">When to remove or combine/squash commits</a></li>
<li><a class="reference internal" href="#when-to-rebase">When to rebase</a></li>
<li><a class="reference internal" href="#github-squash-and-merge-button">Github ‘Squash and Merge’ button</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/development/when_to_rebase.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011–2022, The Astropy Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.5.4. &nbsp;
    Last built 08 May 2022. <br/>
  </p>
</footer>
  </body>
</html>