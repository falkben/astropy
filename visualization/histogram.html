


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Choosing Histogram Bins &#8212; Astropy v5.2.dev104+gcdd6a1f81.d20220509</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating color RGB images" href="rgb.html" />
    <link rel="prev" title="Image stretching and normalization" href="normalization.html" />
  
  <meta name="robots" content="noindex, nofollow">
  
  
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>


  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="rgb.html" title="Creating color RGB images">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="normalization.html" title="Image stretching and normalization">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v5.2.dev104+gcdd6a1f81.d20220509</a>
	 &#187;
      </li>
      <li><a href="index.html" accesskey="U">Data Visualization (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.visualization</span></code>)</a> &#187;</li>
      
      <li>Choosing Histogram Bins</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="choosing-histogram-bins">
<span id="astropy-visualization-hist"></span><h1>Choosing Histogram Bins<a class="headerlink" href="#choosing-histogram-bins" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="index.html#module-astropy.visualization" title="astropy.visualization"><code class="xref py py-mod docutils literal notranslate"><span class="pre">astropy.visualization</span></code></a> module provides the
<a class="reference internal" href="../api/astropy.visualization.hist.html#astropy.visualization.hist" title="astropy.visualization.hist"><code class="xref py py-func docutils literal notranslate"><span class="pre">hist()</span></code></a> function, which is a generalization of
matplotlib’s histogram function which allows for more flexible specification
of histogram bins. For computing bins without the accompanying plot, see
<a class="reference internal" href="../api/astropy.stats.histogram.html#astropy.stats.histogram" title="astropy.stats.histogram"><code class="xref py py-func docutils literal notranslate"><span class="pre">astropy.stats.histogram()</span></code></a>.</p>
<p>As a motivation for this, consider the following two histograms, which are
constructed from the same underlying set of 5000 points, the first with
matplotlib’s default of 10 bins, the second with an arbitrarily chosen
200 bins:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># generate some complicated data</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="mf">1.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                    <span class="o">-</span><span class="mi">4</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span>
                    <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                    <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                    <span class="mi">4</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">1000</span><span class="p">)])</span>

<span class="c1"># truncate to a reasonable range</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">15</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">t</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">)]</span>

<span class="c1"># draw histograms with two different bin widths</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bins</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">]):</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;stepfilled&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;P(t)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;plt.hist(t, bins=</span><span class="si">{</span><span class="n">bins</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span>
                    <span class="n">fontdict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="s1">&#39;monospace&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../visualization/histogram-1.png">png</a>, <a class="reference external" href="../visualization/histogram-1.svg">svg</a>, <a class="reference external" href="../visualization/histogram-1.pdf">pdf</a>)</p>
<div class="figure align-center">
<img alt="../_images/histogram-1.png" class="plot-directive" src="../_images/histogram-1.png" />
</div>
<p>Upon visual inspection, it is clear that each of these choices is suboptimal:
with 10 bins, the fine structure of the data distribution is lost, while with
200 bins, heights of individual bins are affected by sampling error.
The tried-and-true method employed by most scientists is a trial and error
approach that attempts to find a suitable midpoint between these.</p>
<p>Astropy’s <a class="reference internal" href="../api/astropy.visualization.hist.html#astropy.visualization.hist" title="astropy.visualization.hist"><code class="xref py py-func docutils literal notranslate"><span class="pre">hist()</span></code></a> function addresses this by
providing several methods of automatically tuning the histogram bin size.
It has a syntax identical to matplotlib’s <code class="docutils literal notranslate"><span class="pre">plt.hist</span></code> function, with the
exception of the <code class="docutils literal notranslate"><span class="pre">bins</span></code> parameter, which allows specification of one of
four different methods for automatic bin selection. These methods are
implemented in <a class="reference internal" href="../api/astropy.stats.histogram.html#astropy.stats.histogram" title="astropy.stats.histogram"><code class="xref py py-func docutils literal notranslate"><span class="pre">astropy.stats.histogram()</span></code></a>, which has a similar syntax
to the <code class="docutils literal notranslate"><span class="pre">np.histogram</span></code> function.</p>
<div class="section" id="normal-reference-rules">
<h2>Normal Reference Rules<a class="headerlink" href="#normal-reference-rules" title="Permalink to this headline">¶</a></h2>
<p>The simplest methods of tuning the number of bins are the normal reference
rules due to Scott (implemented in <a class="reference internal" href="../api/astropy.stats.scott_bin_width.html#astropy.stats.scott_bin_width" title="astropy.stats.scott_bin_width"><code class="xref py py-func docutils literal notranslate"><span class="pre">scott_bin_width()</span></code></a>) and
Freedman &amp; Diaconis (implemented in <a class="reference internal" href="../api/astropy.stats.freedman_bin_width.html#astropy.stats.freedman_bin_width" title="astropy.stats.freedman_bin_width"><code class="xref py py-func docutils literal notranslate"><span class="pre">freedman_bin_width()</span></code></a>).
These rules proceed by assuming the data is close to normally-distributed, and
applying a rule-of-thumb intended to minimize the difference between the
histogram and the underlying distribution of data.</p>
<p>The following figure shows the results of these two rules on the above dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">astropy.visualization</span> <span class="kn">import</span> <span class="n">hist</span>

<span class="c1"># generate some complicated data</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="mf">1.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                    <span class="o">-</span><span class="mi">4</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span>
                    <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                    <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                    <span class="mi">4</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">1000</span><span class="p">)])</span>

<span class="c1"># truncate to a reasonable range</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">15</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">t</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">)]</span>

<span class="c1"># draw histograms with two different bin widths</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bins</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;scott&#39;</span><span class="p">,</span> <span class="s1">&#39;freedman&#39;</span><span class="p">]):</span>
    <span class="n">hist</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;stepfilled&#39;</span><span class="p">,</span>
         <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;P(t)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;hist(t, bins=&quot;</span><span class="si">{</span><span class="n">bins</span><span class="si">}</span><span class="s1">&quot;)&#39;</span><span class="p">,</span>
                    <span class="n">fontdict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="s1">&#39;monospace&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../visualization/histogram-2.png">png</a>, <a class="reference external" href="../visualization/histogram-2.svg">svg</a>, <a class="reference external" href="../visualization/histogram-2.pdf">pdf</a>)</p>
<div class="figure align-center">
<img alt="../_images/histogram-2.png" class="plot-directive" src="../_images/histogram-2.png" />
</div>
<p>As we can see, both of these rules of thumb choose an intermediate number of
bins which provide a good trade-off between data representation and noise
suppression.</p>
</div>
<div class="section" id="bayesian-models">
<h2>Bayesian Models<a class="headerlink" href="#bayesian-models" title="Permalink to this headline">¶</a></h2>
<p>Though rules-of-thumb like Scott’s rule and the Freedman-Diaconis rule are
fast and convenient, their strong assumptions about the data make them
suboptimal for more complicated distributions. Other methods of bin selection
use fitness functions computed on the actual data to choose an optimal binning.
Astropy implements two of these examples: Knuth’s rule (implemented in
<a class="reference internal" href="../api/astropy.stats.knuth_bin_width.html#astropy.stats.knuth_bin_width" title="astropy.stats.knuth_bin_width"><code class="xref py py-func docutils literal notranslate"><span class="pre">knuth_bin_width()</span></code></a>) and Bayesian Blocks (implemented in
<a class="reference internal" href="../api/astropy.stats.bayesian_blocks.html#astropy.stats.bayesian_blocks" title="astropy.stats.bayesian_blocks"><code class="xref py py-func docutils literal notranslate"><span class="pre">bayesian_blocks()</span></code></a>).</p>
<p>Knuth’s rule chooses a constant bin size which minimizes the error of the
histogram’s approximation to the data, while the Bayesian Blocks uses a more
flexible method which allows varying bin widths. Because both of these require
the minimization of a cost function across the dataset, they are more
computationally intensive than the rules-of-thumb mentioned above. Here are
the results of these procedures for the above dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">astropy.visualization</span> <span class="kn">import</span> <span class="n">hist</span>

<span class="c1"># generate some complicated data</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="mf">1.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                    <span class="o">-</span><span class="mi">4</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span>
                    <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span>
                    <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
                    <span class="mi">4</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">standard_cauchy</span><span class="p">(</span><span class="mi">1000</span><span class="p">)])</span>

<span class="c1"># truncate to a reasonable range</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">15</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">t</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">)]</span>

<span class="c1"># draw histograms with two different bin widths</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bins</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;knuth&#39;</span><span class="p">,</span> <span class="s1">&#39;blocks&#39;</span><span class="p">]):</span>
    <span class="n">hist</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;stepfilled&#39;</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;P(t)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;hist(t, bins=&quot;</span><span class="si">{</span><span class="n">bins</span><span class="si">}</span><span class="s1">&quot;)&#39;</span><span class="p">,</span>
                    <span class="n">fontdict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="s1">&#39;monospace&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../visualization/histogram-3.png">png</a>, <a class="reference external" href="../visualization/histogram-3.svg">svg</a>, <a class="reference external" href="../visualization/histogram-3.pdf">pdf</a>)</p>
<div class="figure align-center">
<img alt="../_images/histogram-3.png" class="plot-directive" src="../_images/histogram-3.png" />
</div>
<p>Notice that both of these capture the shape of the distribution very
accurately, and that the <code class="docutils literal notranslate"><span class="pre">bins='blocks'</span></code> panel selects bin widths which vary
in width depending on the local structure in the data. Compared to standard
defaults, these Bayesian optimization methods provide a much more principled
means of choosing histogram binning.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Choosing Histogram Bins</a><ul>
<li><a class="reference internal" href="#normal-reference-rules">Normal Reference Rules</a></li>
<li><a class="reference internal" href="#bayesian-models">Bayesian Models</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/visualization/histogram.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011–2022, The Astropy Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.5.4. &nbsp;
    Last built 09 May 2022. <br/>
  </p>
</footer>
  </body>
</html>