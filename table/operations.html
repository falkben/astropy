


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Table Operations &#8212; Astropy v5.2.dev94+gb1133d712.d20220509</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Table Indexing" href="indexing.html" />
    <link rel="prev" title="Modifying a Table" href="modify_table.html" />
  
  <meta name="robots" content="noindex, nofollow">
  
  
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>


  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="indexing.html" title="Table Indexing">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="modify_table.html" title="Modifying a Table">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v5.2.dev94+gb1133d712.d20220509</a>
	 &#187;
      </li>
      <li><a href="index.html" accesskey="U">Data Tables (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.table</span></code>)</a> &#187;</li>
      
      <li>Table Operations</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="table-operations">
<span id="id1"></span><h1>Table Operations<a class="headerlink" href="#table-operations" title="Permalink to this headline">¶</a></h1>
<p>In this section we describe high-level operations that can be used to generate
a new table from one or more input tables. This includes:</p>
<hr class="docutils" />
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 52%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Documentation</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#id2">Grouped operations</a></p></td>
<td><p>Group tables and columns by keys</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table.group_by" title="astropy.table.Table.group_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">group_by()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#binning">Binning</a></p></td>
<td><p>Binning tables</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table.group_by" title="astropy.table.Table.group_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">group_by()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#id4">Stack vertically</a></p></td>
<td><p>Concatenate input tables along rows</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.vstack.html#astropy.table.vstack" title="astropy.table.vstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">vstack()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#id6">Stack horizontally</a></p></td>
<td><p>Concatenate input tables along columns</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.hstack.html#astropy.table.hstack" title="astropy.table.hstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">hstack()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#join">Join</a></p></td>
<td><p>Database-style join of two tables</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.join.html#astropy.table.join" title="astropy.table.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#id13">Unique rows</a></p></td>
<td><p>Unique table rows by keys</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.unique.html#astropy.table.unique" title="astropy.table.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#id15">Set difference</a></p></td>
<td><p>Set difference of two tables</p></td>
<td><p><a class="reference internal" href="../api/astropy.table.setdiff.html#astropy.table.setdiff" title="astropy.table.setdiff"><code class="xref py py-func docutils literal notranslate"><span class="pre">setdiff()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#id17">Table diff</a></p></td>
<td><p>Generic difference of two simple tables</p></td>
<td><p><a class="reference internal" href="../api/astropy.utils.diff.report_diff_values.html#astropy.utils.diff.report_diff_values" title="astropy.utils.diff.report_diff_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">report_diff_values()</span></code></a></p></td>
</tr>
</tbody>
</table>
<div class="section" id="grouped-operations">
<span id="id2"></span><h2>Grouped Operations<a class="headerlink" href="#grouped-operations" title="Permalink to this headline">¶</a></h2>
<p>Sometimes in a table or table column there are natural groups within the dataset
for which it makes sense to compute some derived values. A minimal example is a
list of objects with photometry from various observing runs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                    M31     2012-01-02  17.0   17.5</span>
<span class="gp">... </span><span class="s2">                    M31     2012-01-02  17.1   17.4</span>
<span class="gp">... </span><span class="s2">                    M101    2012-01-02  15.1   13.5</span>
<span class="gp">... </span><span class="s2">                    M82     2012-02-14  16.2   14.5</span>
<span class="gp">... </span><span class="s2">                    M31     2012-02-14  16.9   17.3</span>
<span class="gp">... </span><span class="s2">                    M82     2012-02-14  15.2   15.5</span>
<span class="gp">... </span><span class="s2">                    M101    2012-02-14  15.0   13.6</span>
<span class="gp">... </span><span class="s2">                    M82     2012-03-26  15.7   16.5</span>
<span class="gp">... </span><span class="s2">                    M101    2012-03-26  15.1   13.5</span>
<span class="gp">... </span><span class="s2">                    M101    2012-03-26  14.8   14.3</span>
<span class="gp">... </span><span class="s2">                    &quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Make sure magnitudes are printed with one digit after the decimal point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;mag_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;mag_v&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<div class="section" id="table-groups">
<h3>Table Groups<a class="headerlink" href="#table-groups" title="Permalink to this headline">¶</a></h3>
<p>Now suppose we want the mean magnitudes for each object. We first group the data
by the <code class="docutils literal notranslate"><span class="pre">name</span></code> column with the <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table.group_by" title="astropy.table.Table.group_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">group_by()</span></code></a> method.
This returns a new table sorted by <code class="docutils literal notranslate"><span class="pre">name</span></code> which has a <code class="docutils literal notranslate"><span class="pre">groups</span></code> property
specifying the unique values of <code class="docutils literal notranslate"><span class="pre">name</span></code> and the corresponding table rows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obs_by_name</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="p">)</span>  
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-01-02  15.1  13.5  &lt;&lt; First group (index=0, key=&#39;M101&#39;)</span>
<span class="go">M101 2012-02-14  15.0  13.6</span>
<span class="go">M101 2012-03-26  15.1  13.5</span>
<span class="go">M101 2012-03-26  14.8  14.3</span>
<span class="go"> M31 2012-01-02  17.0  17.5  &lt;&lt; Second group (index=4, key=&#39;M31&#39;)</span>
<span class="go"> M31 2012-01-02  17.1  17.4</span>
<span class="go"> M31 2012-02-14  16.9  17.3</span>
<span class="go"> M82 2012-02-14  16.2  14.5  &lt;&lt; Third group (index=7, key=&#39;M83&#39;)</span>
<span class="go"> M82 2012-02-14  15.2  15.5</span>
<span class="go"> M82 2012-03-26  15.7  16.5</span>
<span class="go">                             &lt;&lt; End of groups (index=10)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span>
<span class="go">name</span>
<span class="go">----</span>
<span class="go">M101</span>
<span class="go"> M31</span>
<span class="go"> M82</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">indices</span><span class="p">)</span>
<span class="go">[ 0  4  7 10]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">groups</span></code> property is the portal to all grouped operations with tables and
columns. It defines how the table is grouped via an array of the unique row key
values and the indices of the group boundaries for those key values. The groups
here correspond to the row slices <code class="docutils literal notranslate"><span class="pre">0:4</span></code>, <code class="docutils literal notranslate"><span class="pre">4:7</span></code>, and <code class="docutils literal notranslate"><span class="pre">7:10</span></code> in the
<code class="docutils literal notranslate"><span class="pre">obs_by_name</span></code> table.</p>
<p>The initial argument (<code class="docutils literal notranslate"><span class="pre">keys</span></code>) for the <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table.group_by" title="astropy.table.Table.group_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">group_by()</span></code></a>
function can take a number of input data types:</p>
<ul class="simple">
<li><p>Single string value with a table column name (as shown above)</p></li>
<li><p>List of string values with table column names</p></li>
<li><p>Another <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="../api/astropy.table.Column.html#astropy.table.Column" title="astropy.table.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> with same length as table</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> structured array with same length as table</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> homogeneous array with same length as table</p></li>
</ul>
<p>In all cases the corresponding row elements are considered as a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>
of values which form a key value that is used to sort the original table and
generate the required groups.</p>
<p>As an example, to get the average magnitudes for each object on each observing
night, we would first group the table on both <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">obs_date</span></code> as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs</span><span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;obs_date&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span>
<span class="go">name  obs_date</span>
<span class="go">---- ----------</span>
<span class="go">M101 2012-01-02</span>
<span class="go">M101 2012-02-14</span>
<span class="go">M101 2012-03-26</span>
<span class="go"> M31 2012-01-02</span>
<span class="go"> M31 2012-02-14</span>
<span class="go"> M82 2012-02-14</span>
<span class="go"> M82 2012-03-26</span>
</pre></div>
</div>
</div>
<div class="section" id="manipulating-groups">
<h3>Manipulating Groups<a class="headerlink" href="#manipulating-groups" title="Permalink to this headline">¶</a></h3>
<p>Once you have applied grouping to a table then you can access the individual
groups or subsets of groups. In all cases this returns a new grouped table.
For instance, to get the subtable which corresponds to the second group
(index=1) do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go"> M31 2012-01-02  17.0  17.5</span>
<span class="go"> M31 2012-01-02  17.1  17.4</span>
<span class="go"> M31 2012-02-14  16.9  17.3</span>
</pre></div>
</div>
<p>To get the first and second groups together use a <a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">groups01</span> <span class="o">=</span> <span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">groups01</span><span class="p">)</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-01-02  15.1  13.5</span>
<span class="go">M101 2012-02-14  15.0  13.6</span>
<span class="go">M101 2012-03-26  15.1  13.5</span>
<span class="go">M101 2012-03-26  14.8  14.3</span>
<span class="go"> M31 2012-01-02  17.0  17.5</span>
<span class="go"> M31 2012-01-02  17.1  17.4</span>
<span class="go"> M31 2012-02-14  16.9  17.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">groups01</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span>
<span class="go">name</span>
<span class="go">----</span>
<span class="go">M101</span>
<span class="go"> M31</span>
</pre></div>
</div>
<p>You can also supply a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array of indices or a boolean mask to select
particular groups, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;M101&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="p">[</span><span class="n">mask</span><span class="p">])</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-01-02  15.1  13.5</span>
<span class="go">M101 2012-02-14  15.0  13.6</span>
<span class="go">M101 2012-03-26  15.1  13.5</span>
<span class="go">M101 2012-03-26  14.8  14.3</span>
</pre></div>
</div>
<p>You can iterate over the group subtables and corresponding keys with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">,</span> <span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;****** </span><span class="si">{</span><span class="n">key</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> *******&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">****** M101 *******</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-01-02  15.1  13.5</span>
<span class="go">M101 2012-02-14  15.0  13.6</span>
<span class="go">M101 2012-03-26  15.1  13.5</span>
<span class="go">M101 2012-03-26  14.8  14.3</span>
<span class="go">****** M31 *******</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go"> M31 2012-01-02  17.0  17.5</span>
<span class="go"> M31 2012-01-02  17.1  17.4</span>
<span class="go"> M31 2012-02-14  16.9  17.3</span>
<span class="go">****** M82 *******</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go"> M82 2012-02-14  16.2  14.5</span>
<span class="go"> M82 2012-02-14  15.2  15.5</span>
<span class="go"> M82 2012-03-26  15.7  16.5</span>
</pre></div>
</div>
</div>
<div class="section" id="column-groups">
<h3>Column Groups<a class="headerlink" href="#column-groups" title="Permalink to this headline">¶</a></h3>
<p>Like <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects, <a class="reference internal" href="../api/astropy.table.Column.html#astropy.table.Column" title="astropy.table.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects can also be grouped for subsequent
manipulation with grouped operations. This can apply both to columns within a
<a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or bare <a class="reference internal" href="../api/astropy.table.Column.html#astropy.table.Column" title="astropy.table.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects.</p>
<p>As for <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, the grouping is generated with the
<a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table.group_by" title="astropy.table.Table.group_by"><code class="xref py py-func docutils literal notranslate"><span class="pre">group_by()</span></code></a> method. The difference here is that
there is no option of providing one or more column names since that
does not make sense for a <a class="reference internal" href="../api/astropy.table.Column.html#astropy.table.Column" title="astropy.table.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p>To generate grouping in columns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Column</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cg</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">key_vals</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cg</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">,</span> <span class="n">cg</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;****** </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1"> *******&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">****** bar *******</span>
<span class="go"> a</span>
<span class="go">---</span>
<span class="go">  2</span>
<span class="go">****** foo *******</span>
<span class="go"> a</span>
<span class="go">---</span>
<span class="go">  1</span>
<span class="go">  3</span>
<span class="go">  4</span>
<span class="go">****** qux *******</span>
<span class="go"> a</span>
<span class="go">---</span>
<span class="go">  5</span>
<span class="go">  6</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="aggregation">
<h3>Aggregation<a class="headerlink" href="#aggregation" title="Permalink to this headline">¶</a></h3>
<p>Aggregation is the process of applying a specified reduction function to the
values within each group for each non-key column. This function must accept a
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> as the first argument and return a single scalar value. Common
function examples are <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html#numpy.sum" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.sum()</span></code></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html#numpy.mean" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code></a>, and
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.std.html#numpy.std" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.std()</span></code></a>.</p>
<p>For the example grouped table <code class="docutils literal notranslate"><span class="pre">obs_by_name</span></code> from above, we compute the group
means with the <a class="reference internal" href="../api/astropy.table.TableGroups.html#astropy.table.TableGroups.aggregate" title="astropy.table.groups.TableGroups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aggregate()</span></code></a> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obs_mean</span> <span class="o">=</span> <span class="n">obs_by_name</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>  
<span class="go">AstropyUserWarning: Cannot aggregate column &#39;obs_date&#39; with type &#39;&lt;U10&#39;: ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_mean</span><span class="p">)</span>
<span class="go">name mag_b mag_v</span>
<span class="go">---- ----- -----</span>
<span class="go">M101  15.0  13.7</span>
<span class="go"> M31  17.0  17.4</span>
<span class="go"> M82  15.7  15.5</span>
</pre></div>
</div>
<p>It seems the magnitude values were successfully averaged, but what about the
<a class="reference internal" href="../api/astropy.utils.exceptions.AstropyUserWarning.html#astropy.utils.exceptions.AstropyUserWarning" title="astropy.utils.exceptions.AstropyUserWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">AstropyUserWarning</span></code></a>? Since the <code class="docutils literal notranslate"><span class="pre">obs_date</span></code>
column is a string-type array, the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html#numpy.mean" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code></a> function failed and
raised an exception <code class="docutils literal notranslate"><span class="pre">cannot</span> <span class="pre">perform</span> <span class="pre">reduceat</span> <span class="pre">with</span> <span class="pre">flexible</span> <span class="pre">type</span></code>.  Any time this happens
<a class="reference internal" href="../api/astropy.table.TableGroups.html#astropy.table.TableGroups.aggregate" title="astropy.table.groups.TableGroups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aggregate()</span></code></a> will issue a warning and
then drop that column from the output result. Note that the <code class="docutils literal notranslate"><span class="pre">name</span></code> column is
one of the <code class="docutils literal notranslate"><span class="pre">keys</span></code> used to determine the grouping so it is automatically
ignored from aggregation.</p>
<p>From a grouped table it is possible to select one or more columns on which
to perform the aggregation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="p">[</span><span class="s1">&#39;mag_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">))</span>
<span class="go">mag_b</span>
<span class="go">-----</span>
<span class="go"> 15.0</span>
<span class="go"> 17.0</span>
<span class="go"> 15.7</span>
</pre></div>
</div>
<p>The order of the columns can be specified too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obs_by_name</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;mag_v&#39;</span><span class="p">,</span> <span class="s1">&#39;mag_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">))</span>
<span class="go">name mag_v mag_b</span>
<span class="go">---- ----- -----</span>
<span class="go">M101  13.7  15.0</span>
<span class="go"> M31  17.4  17.0</span>
<span class="go"> M82  15.5  15.7</span>
</pre></div>
</div>
<p>A single column of data can be aggregated as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Column</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cg</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">key_vals</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cg_sums</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">cg_sum</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cg</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">,</span> <span class="n">cg_sums</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sum for </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">cg_sum</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Sum for bar = 2</span>
<span class="go">Sum for foo = 8</span>
<span class="go">Sum for qux = 11</span>
</pre></div>
</div>
<p>If the specified function has a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.reduceat.html#numpy.ufunc.reduceat" title="(in NumPy v1.22)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.ufunc.reduceat()</span></code></a> method, this will
be called instead. This can improve the performance by a factor of 10 to 100
(or more) for large unmasked tables or columns with many relatively small
groups.  It also allows for the use of certain <code class="docutils literal notranslate"><span class="pre">numpy</span></code> functions which
normally take more than one input array but also work as reduction functions,
like <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.add.html#numpy.add" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.add</span></code></a>.  The <code class="docutils literal notranslate"><span class="pre">numpy</span></code> functions which should take advantage of using
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.reduceat.html#numpy.ufunc.reduceat" title="(in NumPy v1.22)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.ufunc.reduceat()</span></code></a> include:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.add.html#numpy.add" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.add</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.arctan2.html#numpy.arctan2" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.arctan2</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.bitwise_and.html#numpy.bitwise_and" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.bitwise_and</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.bitwise_or.html#numpy.bitwise_or" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.bitwise_or</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.bitwise_xor.html#numpy.bitwise_xor" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.bitwise_xor</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.copysign.html#numpy.copysign" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.copysign</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.divide.html#numpy.divide" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.divide</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.equal.html#numpy.equal" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.equal</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.floor_divide.html#numpy.floor_divide" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.floor_divide</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.fmax.html#numpy.fmax" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fmax</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.fmin.html#numpy.fmin" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fmin</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.fmod.html#numpy.fmod" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.fmod</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.greater_equal.html#numpy.greater_equal" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.greater_equal</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.greater.html#numpy.greater" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.greater</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.hypot.html#numpy.hypot" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.hypot</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.left_shift.html#numpy.left_shift" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.left_shift</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.less_equal.html#numpy.less_equal" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.less_equal</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.less.html#numpy.less" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.less</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logaddexp2.html#numpy.logaddexp2" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.logaddexp2</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logaddexp.html#numpy.logaddexp" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.logaddexp</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logical_and.html#numpy.logical_and" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.logical_and</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logical_or.html#numpy.logical_or" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.logical_or</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logical_xor.html#numpy.logical_xor" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.logical_xor</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.maximum.html#numpy.maximum" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.maximum</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.minimum.html#numpy.minimum" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.minimum</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mod.html#numpy.mod" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.mod</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.multiply.html#numpy.multiply" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.multiply</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.not_equal.html#numpy.not_equal" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.not_equal</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.power.html#numpy.power" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.power</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.remainder.html#numpy.remainder" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.remainder</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.right_shift.html#numpy.right_shift" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.right_shift</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.subtract.html#numpy.subtract" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.subtract</span></code></a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.true_divide.html#numpy.true_divide" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.true_divide</span></code></a></p></li>
</ul>
<p>In special cases, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html#numpy.sum" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.sum()</span></code></a> and <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html#numpy.mean" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code></a> are substituted with
their respective <code class="docutils literal notranslate"><span class="pre">reduceat</span></code> methods.</p>
</div>
<div class="section" id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>Table groups can be filtered by means of the
<a class="reference internal" href="../api/astropy.table.TableGroups.html#astropy.table.TableGroups.filter" title="astropy.table.groups.TableGroups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter()</span></code></a> method. This is done by
supplying a function which is called for each group. The function
which is passed to this method must accept two arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">table</span></code> : <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_colnames</span></code> : list of columns in <code class="docutils literal notranslate"><span class="pre">table</span></code> used as keys for grouping</p></li>
</ul>
<p>It must then return either <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>The following will select all table groups with only positive values in the non-
key columns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">all_positive</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">key_colnames</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">colnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">colnames</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">key_colnames</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">colname</span> <span class="ow">in</span> <span class="n">colnames</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="n">colname</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="kc">False</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<p>An example of using this function is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot; a   b    c</span>
<span class="gp">... </span><span class="s2">                  -2  7.0   2</span>
<span class="gp">... </span><span class="s2">                  -2  5.0   1</span>
<span class="gp">... </span><span class="s2">                   1  3.0  -5</span>
<span class="gp">... </span><span class="s2">                   1 -2.0  -6</span>
<span class="gp">... </span><span class="s2">                   1  1.0   7</span>
<span class="gp">... </span><span class="s2">                   0  4.0   4</span>
<span class="gp">... </span><span class="s2">                   3  3.0   5</span>
<span class="gp">... </span><span class="s2">                   3 -2.0   6</span>
<span class="gp">... </span><span class="s2">                   3  1.0   7&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tg</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_positive</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">all_positive</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">t_positive</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go"> a   b   c</span>
<span class="go">--- --- ---</span>
<span class="go"> -2 7.0   2</span>
<span class="go"> -2 5.0   1</span>

<span class="go"> a   b   c</span>
<span class="go">--- --- ---</span>
<span class="go">  0 4.0   4</span>
</pre></div>
</div>
<p>As can be seen only the groups with <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">-2</span></code> and <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">0</span></code> have all
positive values in the non-key columns, so those are the ones that are selected.</p>
<p>Likewise a grouped column can be filtered with the
<a class="reference internal" href="../api/astropy.table.ColumnGroups.html#astropy.table.ColumnGroups.filter" title="astropy.table.groups.ColumnGroups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter()</span></code></a>, method but in this case the
filtering function takes only a single argument which is the column group. It
still must return either <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">all_positive</span><span class="p">(</span><span class="n">column</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">column</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="binning">
<span id="table-binning"></span><h2>Binning<a class="headerlink" href="#binning" title="Permalink to this headline">¶</a></h2>
<p>A common tool in analysis is to bin a table based on some reference value.
Examples:</p>
<ul class="simple">
<li><p>Photometry of a binary star in several bands taken over a
span of time which should be binned by orbital phase.</p></li>
<li><p>Reducing the sampling density for a table by combining
100 rows at a time.</p></li>
<li><p>Unevenly sampled historical data which should binned to
four points per year.</p></li>
</ul>
<p>All of these examples of binning a table can be accomplished using
<a class="reference internal" href="#id2">grouped operations</a>. The examples in that section are focused on the
case of discrete key values such as the name of a source. In this
section we show a concise yet powerful way of applying grouped operations to
accomplish binning on key values such as time, phase, or row number.</p>
<p>The common theme in all of these cases is to convert the key value array into
a new float- or int-valued array whose values are identical for rows in the same
output bin.</p>
<div class="section" id="id3">
<h3>Example<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>As an example, we generate a fake light curve:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">year</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">2000.0</span><span class="p">,</span> <span class="mf">2010.0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>  <span class="c1"># 200 observations over 10 years</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">period</span> <span class="o">=</span> <span class="mf">1.811</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y0</span> <span class="o">=</span> <span class="mf">2005.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mag</span> <span class="o">=</span> <span class="mf">14.0</span> <span class="o">+</span> <span class="mf">1.2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">year</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">/</span> <span class="n">period</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">phase</span> <span class="o">=</span> <span class="p">((</span><span class="n">year</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">/</span> <span class="n">period</span><span class="p">)</span> <span class="o">%</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">year</span><span class="p">,</span> <span class="n">phase</span><span class="p">,</span> <span class="n">mag</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="s1">&#39;mag&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Now we make an array that will be used for binning the data by 0.25 year
intervals:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">year_bin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">year</span> <span class="o">/</span> <span class="mf">0.25</span><span class="p">)</span>
</pre></div>
</div>
<p>This has the property that all samples in each 0.25 year bin have the same
value of <code class="docutils literal notranslate"><span class="pre">year_bin</span></code>. Think of <code class="docutils literal notranslate"><span class="pre">year_bin</span></code> as the bin number for <code class="docutils literal notranslate"><span class="pre">year</span></code>.
Then do the binning by grouping and immediately aggregating with
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html#numpy.mean" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dat_grouped</span> <span class="o">=</span> <span class="n">dat</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">year_bin</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat_binned</span> <span class="o">=</span> <span class="n">dat_grouped</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</pre></div>
</div>
<p>We can plot the results with <code class="docutils literal notranslate"><span class="pre">plt.plot(dat_binned['year'],</span> <span class="pre">dat_binned['mag'],</span>
<span class="pre">'.')</span></code>. Alternately, we could bin into 10 phase bins:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">phase_bin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">phase</span> <span class="o">/</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat_grouped</span> <span class="o">=</span> <span class="n">dat</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">phase_bin</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dat_binned</span> <span class="o">=</span> <span class="n">dat_grouped</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</pre></div>
</div>
<p>This time, try plotting with <code class="docutils literal notranslate"><span class="pre">plt.plot(dat_binned['phase'],</span>
<span class="pre">dat_binned['mag'])</span></code>.</p>
</div>
</div>
<div class="section" id="stack-vertically">
<span id="id4"></span><h2>Stack Vertically<a class="headerlink" href="#stack-vertically" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> class supports stacking tables vertically with the
<a class="reference internal" href="../api/astropy.table.vstack.html#astropy.table.vstack" title="astropy.table.vstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">vstack()</span></code></a> function. This process is also commonly known as
concatenating or appending tables in the row direction. It corresponds roughly
to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.vstack.html#numpy.vstack" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.vstack()</span></code></a> function.</p>
<div class="section" id="id5">
<h3>Examples<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Suppose we have two tables of observations with several column names in
common:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">vstack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs1</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  logLx</span>
<span class="gp">... </span><span class="s2">                     M31     2012-01-02  17.0   42.5</span>
<span class="gp">... </span><span class="s2">                     M82     2012-10-29  16.2   43.5</span>
<span class="gp">... </span><span class="s2">                     M101    2012-10-31  15.1   44.5&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">obs2</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    logLx</span>
<span class="gp">... </span><span class="s2">                     NGC3516 2011-11-11  42.1</span>
<span class="gp">... </span><span class="s2">                     M31     1999-01-05  43.1</span>
<span class="gp">... </span><span class="s2">                     M82     2012-10-30  45.0&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can stack these two tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">vstack</span><span class="p">([</span><span class="n">obs1</span><span class="p">,</span> <span class="n">obs2</span><span class="p">]))</span>
<span class="go">  name   obs_date  mag_b logLx</span>
<span class="go">------- ---------- ----- -----</span>
<span class="go">    M31 2012-01-02  17.0  42.5</span>
<span class="go">    M82 2012-10-29  16.2  43.5</span>
<span class="go">   M101 2012-10-31  15.1  44.5</span>
<span class="go">NGC3516 2011-11-11    --  42.1</span>
<span class="go">    M31 1999-01-05    --  43.1</span>
<span class="go">    M82 2012-10-30    --  45.0</span>
</pre></div>
</div>
<p>Notice that the <code class="docutils literal notranslate"><span class="pre">obs2</span></code> table is missing the <code class="docutils literal notranslate"><span class="pre">mag_b</span></code> column, so in the
stacked output table those values are marked as missing. This is the default
behavior and corresponds to <code class="docutils literal notranslate"><span class="pre">join_type='outer'</span></code>. There are two other allowed
values for the <code class="docutils literal notranslate"><span class="pre">join_type</span></code> argument, <code class="docutils literal notranslate"><span class="pre">'inner'</span></code> and <code class="docutils literal notranslate"><span class="pre">'exact'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">vstack</span><span class="p">([</span><span class="n">obs1</span><span class="p">,</span> <span class="n">obs2</span><span class="p">],</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">))</span>
<span class="go">  name   obs_date  logLx</span>
<span class="go">------- ---------- -----</span>
<span class="go">    M31 2012-01-02  42.5</span>
<span class="go">    M82 2012-10-29  43.5</span>
<span class="go">   M101 2012-10-31  44.5</span>
<span class="go">NGC3516 2011-11-11  42.1</span>
<span class="go">    M31 1999-01-05  43.1</span>
<span class="go">    M82 2012-10-30  45.0</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">vstack</span><span class="p">([</span><span class="n">obs1</span><span class="p">,</span> <span class="n">obs2</span><span class="p">],</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">))</span>  
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">TableMergeError</span>: <span class="n">Inconsistent columns in input arrays (use &#39;inner&#39;</span>
<span class="go">or &#39;outer&#39; join_type to allow non-matching columns)</span>
</pre></div>
</div>
<p>In the case of <code class="docutils literal notranslate"><span class="pre">join_type='inner'</span></code>, only the common columns (the intersection)
are present in the output table. When <code class="docutils literal notranslate"><span class="pre">join_type='exact'</span></code> is specified, then
<a class="reference internal" href="../api/astropy.table.vstack.html#astropy.table.vstack" title="astropy.table.vstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">vstack()</span></code></a> requires that all of the input tables have
exactly the same column names.</p>
<p>More than two tables can be stacked by supplying a longer list of tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obs3</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  logLx</span>
<span class="gp">... </span><span class="s2">                     M45     2012-02-03  15.0   40.5&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">vstack</span><span class="p">([</span><span class="n">obs1</span><span class="p">,</span> <span class="n">obs2</span><span class="p">,</span> <span class="n">obs3</span><span class="p">]))</span>
<span class="go">  name   obs_date  mag_b logLx</span>
<span class="go">------- ---------- ----- -----</span>
<span class="go">    M31 2012-01-02  17.0  42.5</span>
<span class="go">    M82 2012-10-29  16.2  43.5</span>
<span class="go">   M101 2012-10-31  15.1  44.5</span>
<span class="go">NGC3516 2011-11-11    --  42.1</span>
<span class="go">    M31 1999-01-05    --  43.1</span>
<span class="go">    M82 2012-10-30    --  45.0</span>
<span class="go">    M45 2012-02-03  15.0  40.5</span>
</pre></div>
</div>
<p>See also the sections on <a class="reference internal" href="#id10">Merging metadata</a> and <a class="reference internal" href="#merging-column-attributes">Merging column attributes</a>
for details on how these characteristics of the input tables are merged in the
single output table. Note also that you can use a single table <a class="reference internal" href="../api/astropy.table.Row.html#astropy.table.Row" title="astropy.table.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> instead of
a full table as one of the inputs.</p>
</div>
</div>
<div class="section" id="stack-horizontally">
<span id="id6"></span><h2>Stack Horizontally<a class="headerlink" href="#stack-horizontally" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> class supports stacking tables horizontally (in the column-wise
direction) with the <a class="reference internal" href="../api/astropy.table.hstack.html#astropy.table.hstack" title="astropy.table.hstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">hstack()</span></code></a> function. It corresponds
roughly to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.hstack.html#numpy.hstack" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.hstack()</span></code></a> function.</p>
<div class="section" id="id7">
<h3>Examples<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Suppose we have the following two tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">hstack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;a   b    c</span>
<span class="gp">... </span><span class="s2">                   1   foo  1.4</span>
<span class="gp">... </span><span class="s2">                   2   bar  2.1</span>
<span class="gp">... </span><span class="s2">                   3   baz  2.8&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;d     e</span>
<span class="gp">... </span><span class="s2">                   ham   eggs</span>
<span class="gp">... </span><span class="s2">                   spam  toast&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can stack these two tables horizontally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">hstack</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">]))</span>
<span class="go"> a   b   c   d     e</span>
<span class="go">--- --- --- ---- -----</span>
<span class="go">  1 foo 1.4  ham  eggs</span>
<span class="go">  2 bar 2.1 spam toast</span>
<span class="go">  3 baz 2.8   --    --</span>
</pre></div>
</div>
<p>As with <a class="reference internal" href="../api/astropy.table.vstack.html#astropy.table.vstack" title="astropy.table.vstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">vstack()</span></code></a>, there is an optional <code class="docutils literal notranslate"><span class="pre">join_type</span></code>
argument that can take values <code class="docutils literal notranslate"><span class="pre">'inner'</span></code>, <code class="docutils literal notranslate"><span class="pre">'exact'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'outer'</span></code>. The
default is <code class="docutils literal notranslate"><span class="pre">'outer'</span></code>, which effectively takes the union of available rows and
masks out any missing values. This is illustrated in the example above. The
other options give the intersection of rows, where <code class="docutils literal notranslate"><span class="pre">'exact'</span></code> requires that
all tables have exactly the same number of rows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">hstack</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">],</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">))</span>
<span class="go"> a   b   c   d     e</span>
<span class="go">--- --- --- ---- -----</span>
<span class="go">  1 foo 1.4  ham  eggs</span>
<span class="go">  2 bar 2.1 spam toast</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">hstack</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">],</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">))</span>  
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">TableMergeError</span>: <span class="n">Inconsistent number of rows in input arrays (use &#39;inner&#39; or</span>
<span class="go">&#39;outer&#39; join_type to allow non-matching rows)</span>
</pre></div>
</div>
<p>More than two tables can be stacked by supplying a longer list of tables. The
example below also illustrates the behavior when there is a conflict in the
input column names (see the section on <a class="reference internal" href="#column-renaming">Column renaming</a> for details):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t3</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;a    b</span>
<span class="gp">... </span><span class="s2">                   M45  2012-02-03&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">hstack</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">]))</span>
<span class="go">a_1 b_1  c   d     e   a_3    b_3</span>
<span class="go">--- --- --- ---- ----- --- ----------</span>
<span class="go">  1 foo 1.4  ham  eggs M45 2012-02-03</span>
<span class="go">  2 bar 2.1 spam toast  --         --</span>
<span class="go">  3 baz 2.8   --    --  --         --</span>
</pre></div>
</div>
<p>The metadata from the input tables is merged by the process described in the
<a class="reference internal" href="#id10">Merging metadata</a> section. Note also that you can use a single table <a class="reference internal" href="../api/astropy.table.Row.html#astropy.table.Row" title="astropy.table.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a>
instead of a full table as one of the inputs.</p>
</div>
</div>
<div class="section" id="stack-depth-wise">
<span id="stack-depthwise"></span><h2>Stack Depth-Wise<a class="headerlink" href="#stack-depth-wise" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> class supports stacking columns within tables depth-wise using the
<a class="reference internal" href="../api/astropy.table.dstack.html#astropy.table.dstack" title="astropy.table.dstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">dstack()</span></code></a> function. It corresponds roughly to running the
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dstack.html#numpy.dstack" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.dstack()</span></code></a> function on the individual columns matched by name.</p>
<div class="section" id="id8">
<h3>Examples<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Suppose we have tables of data for sources giving information on the enclosed
source counts for different PSF fractions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">dstack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src1</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;psf_frac  counts</span>
<span class="gp">... </span><span class="s2">                     0.10        45.</span>
<span class="gp">... </span><span class="s2">                     0.50        90.</span>
<span class="gp">... </span><span class="s2">                     0.90       120.</span>
<span class="gp">... </span><span class="s2">                     &quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">src2</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;psf_frac  counts</span>
<span class="gp">... </span><span class="s2">                     0.10       200.</span>
<span class="gp">... </span><span class="s2">                     0.50       300.</span>
<span class="gp">... </span><span class="s2">                     0.90       350.</span>
<span class="gp">... </span><span class="s2">                     &quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can stack these two tables depth-wise to get a single table with the
characteristics of both sources:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">srcs</span> <span class="o">=</span> <span class="n">dstack</span><span class="p">([</span><span class="n">src1</span><span class="p">,</span> <span class="n">src2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">srcs</span><span class="p">)</span>
<span class="go"> psf_frac      counts</span>
<span class="go">---------- --------------</span>
<span class="go">0.1 .. 0.1  45.0 .. 200.0</span>
<span class="go">0.5 .. 0.5  90.0 .. 300.0</span>
<span class="go">0.9 .. 0.9 120.0 .. 350.0</span>
</pre></div>
</div>
<p>In this case the counts for the first source are accessible as
<code class="docutils literal notranslate"><span class="pre">srcs['counts'][:,</span> <span class="pre">0]</span></code>, and likewise the second source counts are
<code class="docutils literal notranslate"><span class="pre">srcs['counts'][:,</span> <span class="pre">1]</span></code>.</p>
<p>For this function the length of all input tables must be the same. This
function can accept <code class="docutils literal notranslate"><span class="pre">join_type</span></code> and <code class="docutils literal notranslate"><span class="pre">metadata_conflicts</span></code> just like the
<a class="reference internal" href="../api/astropy.table.vstack.html#astropy.table.vstack" title="astropy.table.vstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">vstack()</span></code></a> function. The <code class="docutils literal notranslate"><span class="pre">join_type</span></code> argument controls how
to handle mismatches in the columns of the input table.</p>
<p>See also the sections on <a class="reference internal" href="#id10">Merging metadata</a> and <a class="reference internal" href="#merging-column-attributes">Merging column attributes</a>
for details on how these characteristics of the input tables are merged in the
single output table. Note also that you can use a single table <a class="reference internal" href="../api/astropy.table.Row.html#astropy.table.Row" title="astropy.table.Row"><code class="xref py py-class docutils literal notranslate"><span class="pre">Row</span></code></a> instead of
a full table as one of the inputs.</p>
</div>
</div>
<div class="section" id="join">
<span id="table-join"></span><h2>Join<a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> class supports the <a class="reference external" href="https://en.wikipedia.org/wiki/Join_(SQL)">database join</a> operation. This provides a flexible
and powerful way to combine tables based on the values in one or more key
columns.</p>
<div class="section" id="id9">
<h3>Examples<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Suppose we have two tables of observations, the first with B and V magnitudes
and the second with X-ray luminosities of an overlapping (but not identical)
sample:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">join</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">optical</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                        M31     2012-01-02  17.0   16.0</span>
<span class="gp">... </span><span class="s2">                        M82     2012-10-29  16.2   15.2</span>
<span class="gp">... </span><span class="s2">                        M101    2012-10-31  15.1   15.5&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xray</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;   name    obs_date    logLx</span>
<span class="gp">... </span><span class="s2">                        NGC3516 2011-11-11  42.1</span>
<span class="gp">... </span><span class="s2">                        M31     1999-01-05  43.1</span>
<span class="gp">... </span><span class="s2">                        M82     2012-10-29  45.0&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../api/astropy.table.join.html#astropy.table.join" title="astropy.table.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a> method allows you to merge these two tables into a single table based
on matching values in the “key columns”. By default, the key columns are the set
of columns that are common to both tables. In this case the key columns are
<code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">obs_date</span></code>. We can find all of the observations of the same
object on the same date as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">opt_xray</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">opt_xray</span><span class="p">)</span>
<span class="go">name  obs_date  mag_b mag_v logLx</span>
<span class="go">---- ---------- ----- ----- -----</span>
<span class="go"> M82 2012-10-29  16.2  15.2  45.0</span>
</pre></div>
</div>
<p>We can perform the match by <code class="docutils literal notranslate"><span class="pre">name</span></code> only by providing the <code class="docutils literal notranslate"><span class="pre">keys</span></code> argument,
which can be either a single column name or a list of column names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">))</span>
<span class="go">name obs_date_1 mag_b mag_v obs_date_2 logLx</span>
<span class="go">---- ---------- ----- ----- ---------- -----</span>
<span class="go"> M31 2012-01-02  17.0  16.0 1999-01-05  43.1</span>
<span class="go"> M82 2012-10-29  16.2  15.2 2012-10-29  45.0</span>
</pre></div>
</div>
<p>This output table has all of the observations that have both optical and X-ray
data for an object (M31 and M82). Notice that since the <code class="docutils literal notranslate"><span class="pre">obs_date</span></code> column
occurs in both tables, it has been split into two columns, <code class="docutils literal notranslate"><span class="pre">obs_date_1</span></code> and
<code class="docutils literal notranslate"><span class="pre">obs_date_2</span></code>. The values are taken from the “left” (<code class="docutils literal notranslate"><span class="pre">optical</span></code>) and “right”
(<code class="docutils literal notranslate"><span class="pre">xray</span></code>) tables, respectively.</p>
</div>
<div class="section" id="different-join-options">
<h3>Different Join Options<a class="headerlink" href="#different-join-options" title="Permalink to this headline">¶</a></h3>
<p>The table joins so far are known as “inner” joins and represent the strict
intersection of the two tables on the key columns.</p>
<p>If you want to make a new table which has <em>every</em> row from the left table and
includes matching values from the right table when available, this is known as a
left join:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">,</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">))</span>
<span class="go">name  obs_date  mag_b mag_v logLx</span>
<span class="go">---- ---------- ----- ----- -----</span>
<span class="go">M101 2012-10-31  15.1  15.5    --</span>
<span class="go"> M31 2012-01-02  17.0  16.0    --</span>
<span class="go"> M82 2012-10-29  16.2  15.2  45.0</span>
</pre></div>
</div>
<p>Two of the observations do not have X-ray data, as indicated by the <code class="docutils literal notranslate"><span class="pre">--</span></code> in
the table. You might be surprised that there is no X-ray data for M31 in the
output. Remember that the default matching key includes both <code class="docutils literal notranslate"><span class="pre">name</span></code> and
<code class="docutils literal notranslate"><span class="pre">obs_date</span></code>. Specifying the key as only the <code class="docutils literal notranslate"><span class="pre">name</span></code> column gives:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">,</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">))</span>
<span class="go">name obs_date_1 mag_b mag_v obs_date_2 logLx</span>
<span class="go">---- ---------- ----- ----- ---------- -----</span>
<span class="go">M101 2012-10-31  15.1  15.5         --    --</span>
<span class="go"> M31 2012-01-02  17.0  16.0 1999-01-05  43.1</span>
<span class="go"> M82 2012-10-29  16.2  15.2 2012-10-29  45.0</span>
</pre></div>
</div>
<p>Likewise you can construct a new table with every row of the right table and
matching left values (when available) using <code class="docutils literal notranslate"><span class="pre">join_type='right'</span></code>.</p>
<p>To make a table with the union of rows from both tables do an “outer” join:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">,</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">))</span>
<span class="go">  name   obs_date  mag_b mag_v logLx</span>
<span class="go">------- ---------- ----- ----- -----</span>
<span class="go">   M101 2012-10-31  15.1  15.5    --</span>
<span class="go">    M31 1999-01-05    --    --  43.1</span>
<span class="go">    M31 2012-01-02  17.0  16.0    --</span>
<span class="go">    M82 2012-10-29  16.2  15.2  45.0</span>
<span class="go">NGC3516 2011-11-11    --    --  42.1</span>
</pre></div>
</div>
<p>In all the above cases the output join table will be sorted by the key
column(s) and in general will not preserve the row order of the input tables.</p>
<p>Finally, you can do a “Cartesian” join, which is the Cartesian product of all
available rows. In this case there are no key columns (and supplying the
<code class="docutils literal notranslate"><span class="pre">keys</span></code> argument is an error):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">,</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;cartesian&#39;</span><span class="p">))</span>
<span class="go">name_1 obs_date_1 mag_b mag_v  name_2 obs_date_2 logLx</span>
<span class="go">------ ---------- ----- ----- ------- ---------- -----</span>
<span class="go">   M31 2012-01-02  17.0  16.0 NGC3516 2011-11-11  42.1</span>
<span class="go">   M31 2012-01-02  17.0  16.0     M31 1999-01-05  43.1</span>
<span class="go">   M31 2012-01-02  17.0  16.0     M82 2012-10-29  45.0</span>
<span class="go">   M82 2012-10-29  16.2  15.2 NGC3516 2011-11-11  42.1</span>
<span class="go">   M82 2012-10-29  16.2  15.2     M31 1999-01-05  43.1</span>
<span class="go">   M82 2012-10-29  16.2  15.2     M82 2012-10-29  45.0</span>
<span class="go">  M101 2012-10-31  15.1  15.5 NGC3516 2011-11-11  42.1</span>
<span class="go">  M101 2012-10-31  15.1  15.5     M31 1999-01-05  43.1</span>
<span class="go">  M101 2012-10-31  15.1  15.5     M82 2012-10-29  45.0</span>
</pre></div>
</div>
</div>
<div class="section" id="non-identical-key-column-names">
<h3>Non-Identical Key Column Names<a class="headerlink" href="#non-identical-key-column-names" title="Permalink to this headline">¶</a></h3>
<p>To use the <a class="reference internal" href="../api/astropy.table.join.html#astropy.table.join" title="astropy.table.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a> function with non-identical key column names, use the
<code class="docutils literal notranslate"><span class="pre">keys_left</span></code> and <code class="docutils literal notranslate"><span class="pre">keys_right</span></code> arguments. In the following example one table
has a <code class="docutils literal notranslate"><span class="pre">'name'</span></code> column while the other has an <code class="docutils literal notranslate"><span class="pre">'obj_id'</span></code> column:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">optical</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                        M31     2012-01-02  17.0   16.0</span>
<span class="gp">... </span><span class="s2">                        M82     2012-10-29  16.2   15.2</span>
<span class="gp">... </span><span class="s2">                        M101    2012-10-31  15.1   15.5&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xray_1</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;obj_id    obs_date    logLx</span>
<span class="gp">... </span><span class="s2">                       NGC3516 2011-11-11  42.1</span>
<span class="gp">... </span><span class="s2">                       M31     1999-01-05  43.1</span>
<span class="gp">... </span><span class="s2">                       M82     2012-10-29  45.0&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to perform a match based on the names of the objects, do the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray_1</span><span class="p">,</span> <span class="n">keys_left</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">keys_right</span><span class="o">=</span><span class="s1">&#39;obj_id&#39;</span><span class="p">))</span>
<span class="go">name obs_date_1 mag_b mag_v obj_id obs_date_2 logLx</span>
<span class="go">---- ---------- ----- ----- ------ ---------- -----</span>
<span class="go"> M31 2012-01-02  17.0  16.0    M31 1999-01-05  43.1</span>
<span class="go"> M82 2012-10-29  16.2  15.2    M82 2012-10-29  45.0</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">keys_left</span></code> and <code class="docutils literal notranslate"><span class="pre">keys_right</span></code> arguments can also take a list of column
names or even a list of column-like objects. The latter case allows specifying
the matching key column values independent of the tables being joined.</p>
</div>
<div class="section" id="identical-key-values">
<h3>Identical Key Values<a class="headerlink" href="#identical-key-values" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> join operation works even if there are multiple rows with identical
key values. For example, the following tables have multiple rows for the column
<code class="docutils literal notranslate"><span class="pre">'key'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">join</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">left</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;L1&#39;</span><span class="p">,</span> <span class="s1">&#39;L2&#39;</span><span class="p">,</span> <span class="s1">&#39;L3&#39;</span><span class="p">,</span> <span class="s1">&#39;L4&#39;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">right</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;R1&#39;</span><span class="p">,</span> <span class="s1">&#39;R2&#39;</span><span class="p">,</span> <span class="s1">&#39;R3&#39;</span><span class="p">,</span> <span class="s1">&#39;R4&#39;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
<span class="go">key  L</span>
<span class="go">--- ---</span>
<span class="go">  0  L1</span>
<span class="go">  1  L2</span>
<span class="go">  1  L3</span>
<span class="go">  2  L4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="go">key  R</span>
<span class="go">--- ---</span>
<span class="go">  1  R1</span>
<span class="go">  1  R2</span>
<span class="go">  2  R3</span>
<span class="go">  4  R4</span>
</pre></div>
</div>
<p>Doing an outer join on these tables shows that what is really happening is a
<a class="reference external" href="https://en.wikipedia.org/wiki/Cartesian_product">Cartesian product</a>. For
each matching key, every combination of the left and right tables is
represented. When there is no match in either the left or right table, the
corresponding column values are designated as missing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">))</span>
<span class="go">key  L   R</span>
<span class="go">--- --- ---</span>
<span class="go">  0  L1  --</span>
<span class="go">  1  L2  R1</span>
<span class="go">  1  L2  R2</span>
<span class="go">  1  L3  R1</span>
<span class="go">  1  L3  R2</span>
<span class="go">  2  L4  R3</span>
<span class="go">  4  --  R4</span>
</pre></div>
</div>
<p>An inner join is the same but only returns rows where there is a key match in
both the left and right tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">join_type</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">))</span>
<span class="go">key  L   R</span>
<span class="go">--- --- ---</span>
<span class="go">  1  L2  R1</span>
<span class="go">  1  L2  R2</span>
<span class="go">  1  L3  R1</span>
<span class="go">  1  L3  R2</span>
<span class="go">  2  L4  R3</span>
</pre></div>
</div>
<p>Conflicts in the input table names are handled by the process described in the
section on <a class="reference internal" href="#column-renaming">Column renaming</a>. See also the sections on <a class="reference internal" href="#id10">Merging metadata</a> and
<a class="reference internal" href="#merging-column-attributes">Merging column attributes</a> for details on how these characteristics of the
input tables are merged in the single output table.</p>
</div>
</div>
<div class="section" id="merging-details">
<h2>Merging Details<a class="headerlink" href="#merging-details" title="Permalink to this headline">¶</a></h2>
<p>When combining two or more tables there is the need to merge certain
characteristics in the inputs and potentially resolve conflicts. This
section describes the process.</p>
<div class="section" id="column-renaming">
<h3>Column Renaming<a class="headerlink" href="#column-renaming" title="Permalink to this headline">¶</a></h3>
<p>In cases where the input tables have conflicting column names, there
is a mechanism to generate unique output column names. There are two
keyword arguments that control the renaming behavior:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table_names</span></code></dt><dd><p>List of strings that provide names for the tables being joined.
By default this is <code class="docutils literal notranslate"><span class="pre">['1',</span> <span class="pre">'2',</span> <span class="pre">...]</span></code>, where the numbers correspond to
the input tables.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uniq_col_name</span></code></dt><dd><p>String format specifier with a default value of <code class="docutils literal notranslate"><span class="pre">'{col_name}_{table_name}'</span></code>.</p>
</dd>
</dl>
<p>This is best understood by example using the <code class="docutils literal notranslate"><span class="pre">optical</span></code> and <code class="docutils literal notranslate"><span class="pre">xray</span></code> tables
in the <a class="reference internal" href="../api/astropy.table.join.html#astropy.table.join" title="astropy.table.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a> example defined previously:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">optical</span><span class="p">,</span> <span class="n">xray</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">table_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;OPTICAL&#39;</span><span class="p">,</span> <span class="s1">&#39;XRAY&#39;</span><span class="p">],</span>
<span class="gp">... </span>           <span class="n">uniq_col_name</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{table_name}</span><span class="s1">_</span><span class="si">{col_name}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="go">name OPTICAL_obs_date mag_b mag_v XRAY_obs_date logLx</span>
<span class="go">---- ---------------- ----- ----- ------------- -----</span>
<span class="go"> M31       2012-01-02  17.0  16.0    1999-01-05  43.1</span>
<span class="go"> M82       2012-10-29  16.2  15.2    2012-10-29  45.0</span>
</pre></div>
</div>
</div>
<div class="section" id="merging-metadata">
<span id="id10"></span><h3>Merging Metadata<a class="headerlink" href="#merging-metadata" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table" title="astropy.table.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> objects can have associated metadata:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Table.meta</span></code>: table-level metadata as an ordered dictionary</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Column.meta</span></code>: per-column metadata as an ordered dictionary</p></li>
</ul>
<p>The table operations described here handle the task of merging the metadata in
the input tables into a single output structure. Because the metadata can be
arbitrarily complex there is no unique way to do the merge. The current
implementation uses a recursive algorithm with four rules:</p>
<ul>
<li><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> elements are merged by keys.</p></li>
<li><p>Conflicting <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a> elements are concatenated.</p></li>
<li><p>Conflicting <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> elements are merged by recursively calling the
merge function.</p></li>
<li><p>Conflicting elements that are not <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>, or
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> will follow the following rules:</p>
<blockquote>
<div><ul class="simple">
<li><p>If both metadata values are identical, the output is set to this value.</p></li>
<li><p>If one of the conflicting metadata values is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the other value is
picked.</p></li>
<li><p>If both metadata values are different and neither is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the one for
the last table in the list is picked.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>By default, a warning is emitted in the last case (both metadata values are not
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>). The warning can be silenced or made into an exception using the
<code class="docutils literal notranslate"><span class="pre">metadata_conflicts</span></code> argument to <a class="reference internal" href="../api/astropy.table.hstack.html#astropy.table.hstack" title="astropy.table.hstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">hstack()</span></code></a>,
<a class="reference internal" href="../api/astropy.table.vstack.html#astropy.table.vstack" title="astropy.table.vstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">vstack()</span></code></a>, or
<a class="reference internal" href="../api/astropy.table.join.html#astropy.table.join" title="astropy.table.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">metadata_conflicts</span></code> option can be set to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'silent'</span></code> – no warning is emitted, the value for the last table is silently
picked.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'warn'</span></code> – a warning is emitted, the value for the last table is picked.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'error'</span></code> – an exception is raised.</p></li>
</ul>
<p>The default strategies for merging metadata can be augmented or customized by
defining subclasses of the <a class="reference internal" href="../api/astropy.utils.metadata.MergeStrategy.html#astropy.utils.metadata.MergeStrategy" title="astropy.utils.metadata.MergeStrategy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MergeStrategy</span></code></a> base class.
In most cases you will also use
<a class="reference internal" href="../api/astropy.utils.metadata.enable_merge_strategies.html#astropy.utils.metadata.enable_merge_strategies" title="astropy.utils.metadata.enable_merge_strategies"><code class="xref py py-func docutils literal notranslate"><span class="pre">enable_merge_strategies()</span></code></a> for enabling the custom
strategies. The linked documentation strings provide details.</p>
</div>
<div class="section" id="merging-column-attributes">
<h3>Merging Column Attributes<a class="headerlink" href="#merging-column-attributes" title="Permalink to this headline">¶</a></h3>
<p>In addition to the table and column <code class="docutils literal notranslate"><span class="pre">meta</span></code> attributes, the column attributes
<code class="docutils literal notranslate"><span class="pre">unit</span></code>, <code class="docutils literal notranslate"><span class="pre">format</span></code>, and <code class="docutils literal notranslate"><span class="pre">description</span></code> are merged by going through the input
tables in order and taking the last value which is defined (i.e., is not
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>).</p>
<div class="section" id="id11">
<h4>Example<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>To merge column attributes <code class="docutils literal notranslate"><span class="pre">unit</span></code>, <code class="docutils literal notranslate"><span class="pre">format</span></code>, or <code class="docutils literal notranslate"><span class="pre">description</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">vstack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">col1</span> <span class="o">=</span> <span class="n">Column</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">col2</span> <span class="o">=</span> <span class="n">Column</span><span class="p">([</span><span class="mi">2</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;cm&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">col3</span> <span class="o">=</span> <span class="n">Column</span><span class="p">([</span><span class="mi">3</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">col1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">col2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t3</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">col3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">])</span>  
<span class="go">MergeConflictWarning: In merged column &#39;a&#39; the &#39;unit&#39; attribute does</span>
<span class="go">not match (cm != m).  Using m for merged output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unit</span>
<span class="go">Unit(&quot;m&quot;)</span>
</pre></div>
</div>
<p>The rules for merging are the same as for <a class="reference internal" href="#id10">Merging metadata</a>, and the
<code class="docutils literal notranslate"><span class="pre">metadata_conflicts</span></code> option also controls the merging of column attributes.</p>
</div>
</div>
<div class="section" id="joining-coordinates-and-custom-join-functions">
<span id="astropy-table-join-functions"></span><h3>Joining Coordinates and Custom Join Functions<a class="headerlink" href="#joining-coordinates-and-custom-join-functions" title="Permalink to this headline">¶</a></h3>
<p>Source catalogs that have <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkyCoord</span></code></a> coordinate columns can be joined using
cross-matching of the coordinates with a specified distance threshold. This is
a special case of a more general problem of “fuzzy” matching of key column
values, where instead of an exact match we require only an approximate match.
This is supported using the <code class="docutils literal notranslate"><span class="pre">join_funcs</span></code> argument.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The coordinate and distance table joins discussed in this section are most
applicable in the case where the relevant entries in at least one of the
tables are all separated from one another by more than twice the join
distance. If this is not satisfied then the join results may be unexpected.</p>
<p>This is a consequence of the algorithm which effectively finds clusters of
nearby points (an “equivalence class”) and assigns a unique cluster
identifier to each entry in both tables. This assumes the join matching
function is a transitive relation where <code class="docutils literal notranslate"><span class="pre">join_func(A,</span> <span class="pre">B)</span></code> and
<code class="docutils literal notranslate"><span class="pre">join_func(B,</span> <span class="pre">C)</span></code> implies <code class="docutils literal notranslate"><span class="pre">join_func(A,</span> <span class="pre">C)</span></code>. With multiple matches on
both left and right sides it is possible for the cluster of points having a
single cluster identifier to expand in size beyond the distance threshold.</p>
<p>Users should be especially aware of this issue if additional join keys
are provided beyond the <code class="docutils literal notranslate"><span class="pre">join_funcs</span></code>. The code does not do a “pre-join”
on the other keys, so the possibility of having overlaps within the distance
in both tables is higher.</p>
</div>
<div class="section" id="id12">
<h4>Example<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>To join two tables on a <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkyCoord</span></code></a> key column we use the <code class="docutils literal notranslate"><span class="pre">join_funcs</span></code> keyword
to supply a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> of functions that specify how to match a particular
key column by name. In the example below we are joining on the <code class="docutils literal notranslate"><span class="pre">sc</span></code> column,
so we provide the following argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">join_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;sc&#39;</span><span class="p">:</span> <span class="n">join_skycoord</span><span class="p">(</span><span class="mf">0.2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)}</span>
</pre></div>
</div>
<p>This tells <a class="reference internal" href="../api/astropy.table.join.html#astropy.table.join" title="astropy.table.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a> to match the <code class="docutils literal notranslate"><span class="pre">sc</span></code> key column using the join function
<a class="reference internal" href="../api/astropy.table.join_skycoord.html#astropy.table.join_skycoord" title="astropy.table.join_skycoord"><code class="xref py py-func docutils literal notranslate"><span class="pre">join_skycoord()</span></code></a> with a matching distance threshold of 0.2
deg. Under the hood this calls
<a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.search_around_sky" title="astropy.coordinates.SkyCoord.search_around_sky"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_around_sky()</span></code></a> or
<a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.search_around_3d" title="astropy.coordinates.SkyCoord.search_around_3d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_around_3d()</span></code></a> to do the
cross-matching. The default is to use
<a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.search_around_sky" title="astropy.coordinates.SkyCoord.search_around_sky"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_around_sky()</span></code></a> (angle) matching, but
<a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.search_around_3d" title="astropy.coordinates.SkyCoord.search_around_3d"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_around_3d()</span></code></a> (length or
dimensionless) is also available. This is specified using the <code class="docutils literal notranslate"><span class="pre">distance_func</span></code>
argument of <a class="reference internal" href="../api/astropy.table.join_skycoord.html#astropy.table.join_skycoord" title="astropy.table.join_skycoord"><code class="xref py py-func docutils literal notranslate"><span class="pre">join_skycoord()</span></code></a>, which can also be a function
that matches the input and output API of
<a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.search_around_sky" title="astropy.coordinates.SkyCoord.search_around_sky"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_around_sky()</span></code></a>.</p>
<p>Now we show the whole process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">join</span><span class="p">,</span> <span class="n">join_skycoord</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sc1</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc2</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">([</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t1</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">sc1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t2</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">sc2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t12</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span> <span class="n">join_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;sc&#39;</span><span class="p">:</span> <span class="n">join_skycoord</span><span class="p">(</span><span class="mf">0.2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t12</span><span class="p">)</span>
<span class="go">sc_id   sc_1  idx_1   sc_2   idx_2</span>
<span class="go">      deg,deg       deg,deg</span>
<span class="go">----- ------- ----- -------- -----</span>
<span class="go">    1 1.0,0.0     1 1.05,0.0     0</span>
<span class="go">    1 1.1,0.0     2 1.05,0.0     0</span>
<span class="go">    2 2.0,0.0     3  2.1,0.0     2</span>
</pre></div>
</div>
<p>The joined table has matched the sources within 0.2 deg and created a new
column <code class="docutils literal notranslate"><span class="pre">sc_id</span></code> with a unique identifier for each source.</p>
<p>You might be wondering what is happening in the join function defined above,
especially if you are interested in defining your own such function. This could
be done in order to allow fuzzy word matching of tables, for example joining
tables of people by name where the names do not always match exactly.</p>
<p>The first thing to note here is that the <a class="reference internal" href="../api/astropy.table.join_skycoord.html#astropy.table.join_skycoord" title="astropy.table.join_skycoord"><code class="xref py py-func docutils literal notranslate"><span class="pre">join_skycoord()</span></code></a>
function actually returns a function itself. This allows specifying a variable
match distance via a function enclosure. The requirement of the join function
is that it accepts two arguments corresponding to the two key columns, and
returns a tuple of <code class="docutils literal notranslate"><span class="pre">(ids1,</span> <span class="pre">ids2)</span></code>. These identifiers correspond to the
identification of each column entry with a unique matched source.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">join_func</span> <span class="o">=</span> <span class="n">join_skycoord</span><span class="p">(</span><span class="mf">0.2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">join_func</span><span class="p">(</span><span class="n">sc1</span><span class="p">,</span> <span class="n">sc2</span><span class="p">)</span>  <span class="c1"># Associate each coordinate with unique source ID</span>
<span class="go">(array([3, 1, 1, 2]), array([1, 4, 2]))</span>
</pre></div>
</div>
<p>If you would like to write your own fuzzy matching function, we suggest starting
from the source code for <a class="reference internal" href="../api/astropy.table.join_skycoord.html#astropy.table.join_skycoord" title="astropy.table.join_skycoord"><code class="xref py py-func docutils literal notranslate"><span class="pre">join_skycoord()</span></code></a> or
<a class="reference internal" href="../api/astropy.table.join_distance.html#astropy.table.join_distance" title="astropy.table.join_distance"><code class="xref py py-func docutils literal notranslate"><span class="pre">join_distance()</span></code></a>.</p>
</div>
<div class="section" id="join-on-distance">
<h4>Join on Distance<a class="headerlink" href="#join-on-distance" title="Permalink to this headline">¶</a></h4>
<p>The example above focused on joining on a <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkyCoord</span></code></a>, but you can also join on
a generic distance between column values using the
<a class="reference internal" href="../api/astropy.table.join_distance.html#astropy.table.join_distance" title="astropy.table.join_distance"><code class="xref py py-func docutils literal notranslate"><span class="pre">join_distance()</span></code></a> join function. This can apply to 1D or 2D
(vector) columns. This will look very similar to the coordinates example, but
here there is a bit more flexibility. The matching is done using
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html#scipy.spatial.cKDTree" title="(in SciPy v1.8.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.spatial.cKDTree</span></code></a> and
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.query_ball_tree.html#scipy.spatial.cKDTree.query_ball_tree" title="(in SciPy v1.8.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.spatial.cKDTree.query_ball_tree()</span></code></a>, and the behavior of these can be
controlled via the <code class="docutils literal notranslate"><span class="pre">kdtree_args</span></code> and <code class="docutils literal notranslate"><span class="pre">query_args</span></code> arguments, respectively.</p>
</div>
</div>
</div>
<div class="section" id="unique-rows">
<span id="id13"></span><h2>Unique Rows<a class="headerlink" href="#unique-rows" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it makes sense to use only rows with unique key columns or even
fully unique rows from a table. This can be done using the above described
<a class="reference internal" href="../api/astropy.table.Table.html#astropy.table.Table.group_by" title="astropy.table.Table.group_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">group_by()</span></code></a> method and <code class="docutils literal notranslate"><span class="pre">groups</span></code> attribute, or with
the <a class="reference internal" href="../api/astropy.table.unique.html#astropy.table.unique" title="astropy.table.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> convenience function. The
<a class="reference internal" href="../api/astropy.table.unique.html#astropy.table.unique" title="astropy.table.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> function returns a sorted table containing the
first row for each unique <code class="docutils literal notranslate"><span class="pre">keys</span></code> column value. If no <code class="docutils literal notranslate"><span class="pre">keys</span></code> is provided, it
returns a sorted table containing all of the fully unique rows.</p>
<div class="section" id="id14">
<h3>Example<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>An example of a situation where you might want to use rows with unique key
columns is a list of objects with photometry from various observing
runs. Using <code class="docutils literal notranslate"><span class="pre">'name'</span></code> as the only <code class="docutils literal notranslate"><span class="pre">keys</span></code>, it returns with the first
occurrence of each of the three targets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                          M31     2012-01-02  17.0   17.5</span>
<span class="gp">... </span><span class="s2">                          M82     2012-02-14  16.2   14.5</span>
<span class="gp">... </span><span class="s2">                          M101    2012-01-02  15.1   13.5</span>
<span class="gp">... </span><span class="s2">                          M31     2012-01-02  17.1   17.4</span>
<span class="gp">... </span><span class="s2">                          M101    2012-01-02  15.1   13.5</span>
<span class="gp">... </span><span class="s2">                          M82     2012-02-14  16.2   14.5</span>
<span class="gp">... </span><span class="s2">                          M31     2012-02-14  16.9   17.3</span>
<span class="gp">... </span><span class="s2">                          M82     2012-02-14  15.2   15.5</span>
<span class="gp">... </span><span class="s2">                          M101    2012-02-14  15.0   13.6</span>
<span class="gp">... </span><span class="s2">                          M82     2012-03-26  15.7   16.5</span>
<span class="gp">... </span><span class="s2">                          M101    2012-03-26  15.1   13.5</span>
<span class="gp">... </span><span class="s2">                          M101    2012-03-26  14.8   14.3</span>
<span class="gp">... </span><span class="s2">                          &quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unique_by_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">unique_by_name</span><span class="p">)</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-01-02  15.1  13.5</span>
<span class="go"> M31 2012-01-02  17.0  17.5</span>
<span class="go"> M82 2012-02-14  16.2  14.5</span>
</pre></div>
</div>
<p>Using multiple columns as <code class="docutils literal notranslate"><span class="pre">keys</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unique_by_name_date</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;obs_date&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">unique_by_name_date</span><span class="p">)</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-01-02  15.1  13.5</span>
<span class="go">M101 2012-02-14  15.0  13.6</span>
<span class="go">M101 2012-03-26  15.1  13.5</span>
<span class="go"> M31 2012-01-02  17.0  17.5</span>
<span class="go"> M31 2012-02-14  16.9  17.3</span>
<span class="go"> M82 2012-02-14  16.2  14.5</span>
<span class="go"> M82 2012-03-26  15.7  16.5</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-difference">
<span id="id15"></span><h2>Set Difference<a class="headerlink" href="#set-difference" title="Permalink to this headline">¶</a></h2>
<p>A set difference will tell you the elements that are contained in the first set
but not in the other. This concept can be applied to rows of a table by using
the <a class="reference internal" href="../api/astropy.table.setdiff.html#astropy.table.setdiff" title="astropy.table.setdiff"><code class="xref py py-func docutils literal notranslate"><span class="pre">setdiff()</span></code></a> function. You provide the function with two
input tables and it will return all rows in the first table which do not occur
in the second table.</p>
<p>The optional <code class="docutils literal notranslate"><span class="pre">keys</span></code> parameter specifies the names of columns that are used to
match table rows. This can be a subset of the full list of columns, but both
the first and second tables must contain all columns specified by <code class="docutils literal notranslate"><span class="pre">keys</span></code>.
If not provided, then <code class="docutils literal notranslate"><span class="pre">keys</span></code> defaults to all column names in the first table.</p>
<p>If no different rows are found, the <a class="reference internal" href="../api/astropy.table.setdiff.html#astropy.table.setdiff" title="astropy.table.setdiff"><code class="xref py py-func docutils literal notranslate"><span class="pre">setdiff()</span></code></a> function
will return an empty table.</p>
<div class="section" id="id16">
<h3>Example<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>The example below illustrates finding the set difference of two observation
lists using a common subset of the columns in two tables.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">setdiff</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat_1</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                      M31     2012-01-02  17.0   16.0</span>
<span class="gp">... </span><span class="s2">                      M82     2012-10-29  16.2   15.2</span>
<span class="gp">... </span><span class="s2">                      M101    2012-10-31  15.1   15.5&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat_2</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;   name    obs_date    logLx</span>
<span class="gp">... </span><span class="s2">                         NGC3516 2011-11-11  42.1</span>
<span class="gp">... </span><span class="s2">                         M31     2012-01-02  43.1</span>
<span class="gp">... </span><span class="s2">                         M82     2012-10-29  45.0&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdiff</span> <span class="o">=</span> <span class="n">setdiff</span><span class="p">(</span><span class="n">cat_1</span><span class="p">,</span> <span class="n">cat_2</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;obs_date&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sdiff</span><span class="p">)</span>
<span class="go">name  obs_date  mag_b mag_v</span>
<span class="go">---- ---------- ----- -----</span>
<span class="go">M101 2012-10-31  15.1  15.5</span>
</pre></div>
</div>
<p>In this example there is a column in the first table that is not
present in the second table, so the <code class="docutils literal notranslate"><span class="pre">keys</span></code> parameter must be used to specify
the desired column names.</p>
</div>
</div>
<div class="section" id="table-diff">
<span id="id17"></span><h2>Table Diff<a class="headerlink" href="#table-diff" title="Permalink to this headline">¶</a></h2>
<p>To compare two tables, you can use
<a class="reference internal" href="../api/astropy.utils.diff.report_diff_values.html#astropy.utils.diff.report_diff_values" title="astropy.utils.diff.report_diff_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">report_diff_values()</span></code></a>, which would produce a report
identical to <a class="reference internal" href="../io/fits/usage/misc.html#io-fits-differs"><span class="std std-ref">FITS diff</span></a>.</p>
<div class="section" id="id18">
<h3>Example<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>The example below illustrates finding the difference between two tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.utils.diff</span> <span class="kn">import</span> <span class="n">report_diff_values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat_1</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                      M31     2012-01-02  17.0   16.0</span>
<span class="gp">... </span><span class="s2">                      M82     2012-10-29  16.2   15.2</span>
<span class="gp">... </span><span class="s2">                      M101    2012-10-31  15.1   15.5&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat_2</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;name    obs_date    mag_b  mag_v</span>
<span class="gp">... </span><span class="s2">                      M31     2012-01-02  17.0   16.5</span>
<span class="gp">... </span><span class="s2">                      M82     2012-10-29  16.2   15.2</span>
<span class="gp">... </span><span class="s2">                      M101    2012-10-30  15.1   15.5</span>
<span class="gp">... </span><span class="s2">                      NEW     2018-05-08   nan    9.0&quot;&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">identical</span> <span class="o">=</span> <span class="n">report_diff_values</span><span class="p">(</span><span class="n">cat_1</span><span class="p">,</span> <span class="n">cat_2</span><span class="p">,</span> <span class="n">fileobj</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go">     name  obs_date  mag_b mag_v</span>
<span class="go">     ---- ---------- ----- -----</span>
<span class="go">  a&gt;  M31 2012-01-02  17.0  16.0</span>
<span class="go">   ?                           ^</span>
<span class="go">  b&gt;  M31 2012-01-02  17.0  16.5</span>
<span class="go">   ?                           ^</span>
<span class="go">      M82 2012-10-29  16.2  15.2</span>
<span class="go">  a&gt; M101 2012-10-31  15.1  15.5</span>
<span class="go">   ?               ^</span>
<span class="go">  b&gt; M101 2012-10-30  15.1  15.5</span>
<span class="go">   ?               ^</span>
<span class="go">  b&gt;  NEW 2018-05-08   nan   9.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">identical</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Table Operations</a><ul>
<li><a class="reference internal" href="#grouped-operations">Grouped Operations</a><ul>
<li><a class="reference internal" href="#table-groups">Table Groups</a></li>
<li><a class="reference internal" href="#manipulating-groups">Manipulating Groups</a></li>
<li><a class="reference internal" href="#column-groups">Column Groups</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#aggregation">Aggregation</a></li>
<li><a class="reference internal" href="#filtering">Filtering</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#binning">Binning</a><ul>
<li><a class="reference internal" href="#id3">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stack-vertically">Stack Vertically</a><ul>
<li><a class="reference internal" href="#id5">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stack-horizontally">Stack Horizontally</a><ul>
<li><a class="reference internal" href="#id7">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stack-depth-wise">Stack Depth-Wise</a><ul>
<li><a class="reference internal" href="#id8">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#join">Join</a><ul>
<li><a class="reference internal" href="#id9">Examples</a></li>
<li><a class="reference internal" href="#different-join-options">Different Join Options</a></li>
<li><a class="reference internal" href="#non-identical-key-column-names">Non-Identical Key Column Names</a></li>
<li><a class="reference internal" href="#identical-key-values">Identical Key Values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#merging-details">Merging Details</a><ul>
<li><a class="reference internal" href="#column-renaming">Column Renaming</a></li>
<li><a class="reference internal" href="#merging-metadata">Merging Metadata</a></li>
<li><a class="reference internal" href="#merging-column-attributes">Merging Column Attributes</a><ul>
<li><a class="reference internal" href="#id11">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#joining-coordinates-and-custom-join-functions">Joining Coordinates and Custom Join Functions</a><ul>
<li><a class="reference internal" href="#id12">Example</a></li>
<li><a class="reference internal" href="#join-on-distance">Join on Distance</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#unique-rows">Unique Rows</a><ul>
<li><a class="reference internal" href="#id14">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-difference">Set Difference</a><ul>
<li><a class="reference internal" href="#id16">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#table-diff">Table Diff</a><ul>
<li><a class="reference internal" href="#id18">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/table/operations.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011–2022, The Astropy Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.5.4. &nbsp;
    Last built 08 May 2022. <br/>
  </p>
</footer>
  </body>
</html>