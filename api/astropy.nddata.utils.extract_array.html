


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>extract_array &#8212; Astropy v5.2.dev94+gb1133d712.d20220509</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="add_array" href="astropy.nddata.utils.add_array.html" />
    <link rel="prev" title="InvalidBitFlag" href="astropy.nddata.bitmask.InvalidBitFlag.html" />
  
  <meta name="robots" content="noindex, nofollow">
  
  
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>


  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="astropy.nddata.utils.add_array.html" title="add_array">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="astropy.nddata.bitmask.InvalidBitFlag.html" title="InvalidBitFlag">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v5.2.dev94+gb1133d712.d20220509</a>
	 &#187;
      </li>
      <li><a href="../nddata/index.html" accesskey="U">N-Dimensional Datasets (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.nddata</span></code>)</a> &#187;</li>
      
      <li>extract_array</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="extract-array">
<h1>extract_array<a class="headerlink" href="#extract-array" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="astropy.nddata.utils.extract_array">
<code class="sig-prename descclassname"><span class="pre">astropy.nddata.utils.</span></code><code class="sig-name descname"><span class="pre">extract_array</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array_large</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'partial'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_position</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/astropy/nddata/utils.html#extract_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#astropy.nddata.utils.extract_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a smaller array of the given shape and position from a
larger array.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>array_large</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></dt><dd><p>The array from which to extract the small array.</p>
</dd>
<dt><strong>shape</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a> thereof</span></dt><dd><p>The shape of the extracted array (for 1D arrays, this can be an
<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>).  See the <code class="docutils literal notranslate"><span class="pre">mode</span></code> keyword for additional details.</p>
</dd>
<dt><strong>position</strong><span class="classifier"><a class="reference internal" href="../glossary.html#term-number"><span class="xref std std-term">number</span></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a> thereof</span></dt><dd><p>The position of the small array’s center with respect to the
large array.  The pixel coordinates should be in the same order
as the array shape.  Integer positions are at the pixel centers
(for 1D arrays, this can be a number).</p>
</dd>
<dt><strong>mode</strong><span class="classifier">{‘partial’, ‘trim’, ‘strict’}, optional</span></dt><dd><p>The mode used for extracting the small array.  For the
<code class="docutils literal notranslate"><span class="pre">'partial'</span></code> and <code class="docutils literal notranslate"><span class="pre">'trim'</span></code> modes, a partial overlap of the
small array and the large array is sufficient.  For the
<code class="docutils literal notranslate"><span class="pre">'strict'</span></code> mode, the small array has to be fully contained
within the large array, otherwise an
<a class="reference internal" href="astropy.nddata.utils.PartialOverlapError.html#astropy.nddata.utils.PartialOverlapError" title="astropy.nddata.utils.PartialOverlapError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PartialOverlapError</span></code></a> is raised.   In all
modes, non-overlapping arrays will raise a
<a class="reference internal" href="astropy.nddata.utils.NoOverlapError.html#astropy.nddata.utils.NoOverlapError" title="astropy.nddata.utils.NoOverlapError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NoOverlapError</span></code></a>.  In <code class="docutils literal notranslate"><span class="pre">'partial'</span></code> mode,
positions in the small array that do not overlap with the large
array will be filled with <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>.  In <code class="docutils literal notranslate"><span class="pre">'trim'</span></code> mode
only the overlapping elements are returned, thus the resulting
small array may be smaller than the requested <code class="docutils literal notranslate"><span class="pre">shape</span></code>.</p>
</dd>
<dt><strong>fill_value</strong><span class="classifier"><a class="reference internal" href="../glossary.html#term-number"><span class="xref std std-term">number</span></a>, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">mode='partial'</span></code>, the value to fill pixels in the extracted
small array that do not overlap with the input <code class="docutils literal notranslate"><span class="pre">array_large</span></code>.
<code class="docutils literal notranslate"><span class="pre">fill_value</span></code> will be changed to have the same <code class="docutils literal notranslate"><span class="pre">dtype</span></code> as the
<code class="docutils literal notranslate"><span class="pre">array_large</span></code> array, with one exception. If <code class="docutils literal notranslate"><span class="pre">array_large</span></code>
has integer type and <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> is <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>, then a
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ValueError</span></code></a> will be raised.</p>
</dd>
<dt><strong>return_position</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.10)"><span class="xref std std-ref">bool</span></a>, optional</span></dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, return the coordinates of <code class="docutils literal notranslate"><span class="pre">position</span></code> in the
coordinate system of the returned array.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>array_small</strong><span class="classifier"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></dt><dd><p>The extracted array.</p>
</dd>
<dt><strong>new_position</strong><span class="classifier"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">tuple</span></code></a></span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">return_position</span></code> is true, this tuple will contain the
coordinates of the input <code class="docutils literal notranslate"><span class="pre">position</span></code> in the coordinate system
of <code class="docutils literal notranslate"><span class="pre">array_small</span></code>. Note that for partially overlapping arrays,
<code class="docutils literal notranslate"><span class="pre">new_position</span></code> might actually be outside of the
<code class="docutils literal notranslate"><span class="pre">array_small</span></code>; <code class="docutils literal notranslate"><span class="pre">array_small[new_position]</span></code> might give wrong
results if any element in <code class="docutils literal notranslate"><span class="pre">new_position</span></code> is negative.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>We consider a large array with the shape 11x10, from which we extract
a small array of shape 3x5:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata.utils</span> <span class="kn">import</span> <span class="n">extract_array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">large_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">110</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extract_array</span><span class="p">(</span><span class="n">large_array</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="go">array([[65, 66, 67, 68, 69],</span>
<span class="go">       [75, 76, 77, 78, 79],</span>
<span class="go">       [85, 86, 87, 88, 89]])</span>
</pre></div>
</div>
</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">extract_array</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/api/astropy.nddata.utils.extract_array.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011–2022, The Astropy Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.5.4. &nbsp;
    Last built 09 May 2022. <br/>
  </p>
</footer>
  </body>
</html>