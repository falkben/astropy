


<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>N-Dimensional Datasets (astropy.nddata) &#8212; Astropy v5.2.dev94+gb1133d712.d20220509</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CCDData Class" href="ccddata.html" />
    <link rel="prev" title="enable" href="../api/astropy.units.deprecated.enable.html" />
  
  <meta name="robots" content="noindex, nofollow">
  
  
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>


  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="ccddata.html" title="CCDData Class">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="../api/astropy.units.deprecated.enable.html" title="enable">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v5.2.dev94+gb1133d712.d20220509</a>
	 &#187;
      </li>
      
      <li>N-Dimensional Datasets (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.nddata</span></code>)</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="n-dimensional-datasets-astropy-nddata">
<span id="astropy-nddata"></span><h1>N-Dimensional Datasets (<a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.nddata</span></code></a>)<a class="headerlink" href="#n-dimensional-datasets-astropy-nddata" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nddata</span></code></a> package provides classes to represent images and other
gridded data, some essential functions for manipulating images, and the
infrastructure for package developers who wish to include support for the
image classes. This subpackage was developed based on <a class="reference external" href="https://github.com/astropy/astropy-APEs/blob/main/APE7.rst">APE 7</a>.</p>
</div>
<div class="section" id="getting-started">
<span id="astropy-nddata-getting-started"></span><h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nddata">
<h3>NDData<a class="headerlink" href="#nddata" title="Permalink to this headline">¶</a></h3>
<p>The primary purpose of <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> is to act as a <em>container</em> for
data, metadata, and other related information like a mask.</p>
<p>An <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> object can be instantiated by passing it an
n-dimensional <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span></code></a> array:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">NDData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>  <span class="c1"># a 3-dimensional array with all zeros</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd1</span> <span class="o">=</span> <span class="n">NDData</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
</pre></div>
</div>
<p>Or something that can be converted to a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span> <span class="o">=</span> <span class="n">NDData</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span>
<span class="go">NDData([1, 2, 3, 4])</span>
</pre></div>
</div>
<p>And can be accessed again via the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span><span class="o">.</span><span class="n">data</span>
<span class="go">array([1, 2, 3, 4])</span>
</pre></div>
</div>
<p>It also supports additional properties like a <code class="docutils literal notranslate"><span class="pre">unit</span></code> or <code class="docutils literal notranslate"><span class="pre">mask</span></code> for the
data, a <code class="docutils literal notranslate"><span class="pre">wcs</span></code> (World Coordinate System) and <code class="docutils literal notranslate"><span class="pre">uncertainty</span></code> of the data and
additional <code class="docutils literal notranslate"><span class="pre">meta</span></code> attributes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">data</span> <span class="o">&gt;</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;erg / s&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">StdDevUncertainty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">StdDevUncertainty</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="c1"># representing standard deviation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;fictional data.&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd</span> <span class="o">=</span> <span class="n">NDData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">uncertainty</span><span class="o">=</span><span class="n">uncertainty</span><span class="p">,</span>
<span class="gp">... </span>             <span class="n">meta</span><span class="o">=</span><span class="n">meta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd</span>
<span class="go">NDData([1, 2, 3, 4], unit=&#39;erg / s&#39;)</span>
</pre></div>
</div>
<p>The representation only displays the <code class="docutils literal notranslate"><span class="pre">data</span></code>; the other attributes need to be
accessed directly, for example, <code class="docutils literal notranslate"><span class="pre">ndd.mask</span></code> to access the mask.</p>
</div>
<div class="section" id="nddataref">
<h3>NDDataRef<a class="headerlink" href="#nddataref" title="Permalink to this headline">¶</a></h3>
<p>Building upon this pure container, <a class="reference internal" href="../api/astropy.nddata.NDDataRef.html#astropy.nddata.NDDataRef" title="astropy.nddata.NDDataRef"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a> implements:</p>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">read</span></code> and <code class="docutils literal notranslate"><span class="pre">write</span></code> method to access <code class="docutils literal notranslate"><span class="pre">astropy</span></code>’s unified file I/O
interface.</p></li>
<li><p>Simple arithmetics like addition, subtraction, division, and multiplication.</p></li>
<li><p>Slicing.</p></li>
</ul>
<p>Instances are created in the same way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">NDDataRef</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd</span> <span class="o">=</span> <span class="n">NDDataRef</span><span class="p">(</span><span class="n">ndd</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd</span>
<span class="go">NDDataRef([1, 2, 3, 4], unit=&#39;erg / s&#39;)</span>
</pre></div>
</div>
<p>But also support arithmetic (<a class="reference internal" href="mixins/ndarithmetic.html#nddata-arithmetic"><span class="std std-ref">NDData Arithmetic</span></a>) like addition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">astropy.units</span> <span class="k">as</span> <span class="nn">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span> <span class="o">=</span> <span class="n">ndd</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">erg</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span>
<span class="go">NDDataRef([ 5. , -1.5,  6. ,  6.5], unit=&#39;erg / s&#39;)</span>
</pre></div>
</div>
<p>Because these operations have a wide range of options, these are not available
using arithmetic operators like <code class="docutils literal notranslate"><span class="pre">+</span></code>.</p>
<p>Slicing or indexing (<a class="reference internal" href="mixins/ndslicing.html#nddata-slicing"><span class="std std-ref">Slicing and Indexing NDData</span></a>) is possible (with warnings issued if
some attribute cannot be sliced):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># discard the first two elements  </span>
<span class="go">NDDataRef([6. , 6.5], unit=&#39;erg / s&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndd2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>   <span class="c1"># get the second element  </span>
<span class="go">NDDataRef(-1.5, unit=&#39;erg / s&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-two-dimensional-data-like-images">
<h3>Working with Two-Dimensional Data Like Images<a class="headerlink" href="#working-with-two-dimensional-data-like-images" title="Permalink to this headline">¶</a></h3>
<p>Though the <a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nddata</span></code></a> package supports any kind of gridded data, this
introduction will focus on the use of <a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nddata</span></code></a> for two-dimensional
images. To get started, we will construct a two-dimensional image with a few
sources, some Gaussian noise, and a “cosmic ray” which we will later mask out.</p>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p>First, construct a two-dimensional image with a few sources, some Gaussian
noise, and a “cosmic ray”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.modeling.models</span> <span class="kn">import</span> <span class="n">Gaussian2D</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">600</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">Gaussian2D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">+</span>
<span class="gp">... </span>        <span class="n">Gaussian2D</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">1.2</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span>
<span class="gp">... </span>        <span class="n">Gaussian2D</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.23</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span>
<span class="gp">... </span>        <span class="n">Gaussian2D</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mi">525</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span>
<span class="gp">... </span>        <span class="n">Gaussian2D</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">225</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">+=</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cosmic_ray_value</span> <span class="o">=</span> <span class="mf">0.997</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">:</span><span class="mi">310</span><span class="p">]</span> <span class="o">=</span> <span class="n">cosmic_ray_value</span>
</pre></div>
</div>
<p>This image has a large “galaxy” in the lower left and the “cosmic ray” is the
horizontal line in the lower middle of the image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../nddata/index-1.png">png</a>, <a class="reference external" href="../nddata/index-1.svg">svg</a>, <a class="reference external" href="../nddata/index-1.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/index-12.png" class="plot-directive" src="../_images/index-12.png" />
</div>
<p>The “cosmic ray” can be masked out in this test image, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">==</span> <span class="n">cosmic_ray_value</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ccddata-class-for-images">
<h3><a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> Class for Images<a class="headerlink" href="#ccddata-class-for-images" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> object, like the other objects in this package,
can store the data, a mask, and metadata. The <a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> object
requires that a unit be specified:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">CCDData</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ccd</span> <span class="o">=</span> <span class="n">CCDData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">meta</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;fake galaxy&#39;</span><span class="p">,</span> <span class="s1">&#39;filter&#39;</span><span class="p">:</span> <span class="s1">&#39;R&#39;</span><span class="p">},</span>
<span class="gp">... </span>              <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;adu&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="slicing">
<h3>Slicing<a class="headerlink" href="#slicing" title="Permalink to this headline">¶</a></h3>
<p>Slicing works the way you would expect with the mask and, if present,
WCS, sliced appropriately:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ccd2</span> <span class="o">=</span> <span class="n">ccd</span><span class="p">[:</span><span class="mi">200</span><span class="p">,</span> <span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ccd2</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(200, 600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ccd2</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(200, 600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Show the mask in a region around the cosmic ray:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ccd2</span><span class="o">.</span><span class="n">mask</span><span class="p">[</span><span class="mi">99</span><span class="p">:</span><span class="mi">102</span><span class="p">,</span> <span class="mi">299</span><span class="p">:</span><span class="mi">311</span><span class="p">]</span>
<span class="go">array([[False, False, False, False, False, False, False, False, False,</span>
<span class="go">        False, False, False],</span>
<span class="go">       [False,  True,  True,  True,  True,  True,  True,  True,  True,</span>
<span class="go">         True,  True, False],</span>
<span class="go">       [False, False, False, False, False, False, False, False, False,</span>
<span class="go">        False, False, False]]...)</span>
</pre></div>
</div>
<p>For many applications it may be more convenient to use
<a class="reference internal" href="../api/astropy.nddata.Cutout2D.html#astropy.nddata.Cutout2D" title="astropy.nddata.Cutout2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cutout2D</span></code></a>, described in <a class="reference internal" href="#image-utilities">image_utilities</a>.</p>
</div>
<div class="section" id="image-arithmetic-including-uncertainty">
<h3>Image Arithmetic, Including Uncertainty<a class="headerlink" href="#image-arithmetic-including-uncertainty" title="Permalink to this headline">¶</a></h3>
<p>Methods are provided for basic arithmetic operations between images, including
propagation of uncertainties. Three uncertainty types are supported: variance
(<a class="reference internal" href="../api/astropy.nddata.VarianceUncertainty.html#astropy.nddata.VarianceUncertainty" title="astropy.nddata.VarianceUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VarianceUncertainty</span></code></a>), standard deviation
(<a class="reference internal" href="../api/astropy.nddata.StdDevUncertainty.html#astropy.nddata.StdDevUncertainty" title="astropy.nddata.StdDevUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StdDevUncertainty</span></code></a>), and inverse variance
(<a class="reference internal" href="../api/astropy.nddata.InverseVariance.html#astropy.nddata.InverseVariance" title="astropy.nddata.InverseVariance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InverseVariance</span></code></a>).</p>
<div class="section" id="id1">
<h4>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>This example creates an uncertainty that is Poisson error, stored as a
variance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">VarianceUncertainty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">poisson_noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">ccd</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ccd</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">VarianceUncertainty</span><span class="p">(</span><span class="n">poisson_noise</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>As a convenience, the uncertainty can also be set with a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array. In
that case, the uncertainty is assumed to be the standard deviation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ccd</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">poisson_noise</span>
<span class="go">INFO: array provided for uncertainty; assuming it is a StdDevUncertainty. [astropy.nddata.ccddata]</span>
</pre></div>
</div>
<p>If we make a copy of the image and add that to the original, the uncertainty
changes as expected:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ccd2</span> <span class="o">=</span> <span class="n">ccd</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">added_ccds</span> <span class="o">=</span> <span class="n">ccd</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ccd2</span><span class="p">,</span> <span class="n">handle_meta</span><span class="o">=</span><span class="s1">&#39;first_found&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">added_ccds</span><span class="o">.</span><span class="n">uncertainty</span><span class="o">.</span><span class="n">array</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">ccd</span><span class="o">.</span><span class="n">uncertainty</span><span class="o">.</span><span class="n">array</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> 
<span class="go">0.99999999999999989</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reading-and-writing">
<h3>Reading and Writing<a class="headerlink" href="#reading-and-writing" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> can be saved to a FITS file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ccd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test_file.fits&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And can also be read in from a FITS file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ccd2</span> <span class="o">=</span> <span class="n">CCDData</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;test_file.fits&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note the unit is stored in the <code class="docutils literal notranslate"><span class="pre">BUNIT</span></code> keyword in the header on saving, and is
read from the header if it is present.</p>
<p>Detailed help on the available keyword arguments for reading and writing
can be obtained via the <code class="docutils literal notranslate"><span class="pre">help()</span></code> method as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CCDData</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">help</span><span class="p">(</span><span class="s1">&#39;fits&#39;</span><span class="p">)</span>  <span class="c1"># Get help on the CCDData FITS reader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CCDData</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">help</span><span class="p">(</span><span class="s1">&#39;fits&#39;</span><span class="p">)</span>  <span class="c1"># Get help on the CCDData FITS writer</span>
</pre></div>
</div>
</div>
<div class="section" id="image-utilities">
<span id="id2"></span><h3>Image Utilities<a class="headerlink" href="#image-utilities" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cutouts">
<h4>Cutouts<a class="headerlink" href="#cutouts" title="Permalink to this headline">¶</a></h4>
<p>Though slicing directly is one way to extract a subframe,
<a class="reference internal" href="../api/astropy.nddata.Cutout2D.html#astropy.nddata.Cutout2D" title="astropy.nddata.Cutout2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cutout2D</span></code></a> provides more convenient access to cutouts from the
data.</p>
<div class="section" id="id3">
<h5>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p>This example pulls out the large “galaxy” in the lower left of the image, with
the center of the cutout at <code class="docutils literal notranslate"><span class="pre">position</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">Cutout2D</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mf">149.7</span><span class="p">,</span> <span class="mf">100.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">81</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>     <span class="c1"># pixels</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cutout</span> <span class="o">=</span> <span class="n">Cutout2D</span><span class="p">(</span><span class="n">ccd</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cutout</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>(<a class="reference external" href="../nddata/index-2.png">png</a>, <a class="reference external" href="../nddata/index-2.svg">svg</a>, <a class="reference external" href="../nddata/index-2.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/index-21.png" class="plot-directive" src="../_images/index-21.png" />
</div>
<p>This cutout can also plot itself on the original image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ccd</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">cutout</span><span class="o">.</span><span class="n">plot_on_original</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>(<a class="reference external" href="../nddata/index-3.png">png</a>, <a class="reference external" href="../nddata/index-3.svg">svg</a>, <a class="reference external" href="../nddata/index-3.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/index-31.png" class="plot-directive" src="../_images/index-31.png" />
</div>
<p>The cutout also provides methods for finding pixel coordinates in the original
or in the cutout; recall that <code class="docutils literal notranslate"><span class="pre">position</span></code> is the center of the cutout in the
original image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">position</span>
<span class="go">(149.7, 100.1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cutout</span><span class="o">.</span><span class="n">to_cutout_position</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>  
<span class="go">(49.7, 40.099999999999994)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cutout</span><span class="o">.</span><span class="n">to_original_position</span><span class="p">((</span><span class="mf">49.7</span><span class="p">,</span> <span class="mf">40.099999999999994</span><span class="p">))</span>  
<span class="go"> (149.7, 100.1)</span>
</pre></div>
</div>
<p>For more details, including constructing a cutout from World Coordinates and
the options for handling cutouts that go beyond the bounds of the original
image, see <a class="reference internal" href="utils.html#cutout-images"><span class="std std-ref">2D Cutout Images</span></a>.</p>
</div>
</div>
<div class="section" id="image-resizing">
<h4>Image Resizing<a class="headerlink" href="#image-resizing" title="Permalink to this headline">¶</a></h4>
<p>The functions <a class="reference internal" href="../api/astropy.nddata.block_reduce.html#astropy.nddata.block_reduce" title="astropy.nddata.block_reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_reduce</span></code></a> and
<a class="reference internal" href="../api/astropy.nddata.block_replicate.html#astropy.nddata.block_replicate" title="astropy.nddata.block_replicate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_replicate</span></code></a> resize images.</p>
<div class="section" id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<p>This example reduces the size of the image by a factor of 4. Note that the
result is a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>; the mask, metadata, etc. are discarded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.nddata</span> <span class="kn">import</span> <span class="n">block_reduce</span><span class="p">,</span> <span class="n">block_replicate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">smaller</span> <span class="o">=</span> <span class="n">block_reduce</span><span class="p">(</span><span class="n">ccd</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">smaller</span>
<span class="go">array(...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">smaller</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<p>(<a class="reference external" href="../nddata/index-4.png">png</a>, <a class="reference external" href="../nddata/index-4.svg">svg</a>, <a class="reference external" href="../nddata/index-4.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/index-41.png" class="plot-directive" src="../_images/index-41.png" />
</div>
<p>By default, both <a class="reference internal" href="../api/astropy.nddata.block_reduce.html#astropy.nddata.block_reduce" title="astropy.nddata.block_reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_reduce</span></code></a> and
<a class="reference internal" href="../api/astropy.nddata.block_replicate.html#astropy.nddata.block_replicate" title="astropy.nddata.block_replicate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_replicate</span></code></a> conserve flux.</p>
</div>
</div>
</div>
<div class="section" id="other-image-classes">
<h3>Other Image Classes<a class="headerlink" href="#other-image-classes" title="Permalink to this headline">¶</a></h3>
<p>There are two less restrictive classes, <a class="reference internal" href="../api/astropy.nddata.NDDataArray.html#astropy.nddata.NDDataArray" title="astropy.nddata.NDDataArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataArray</span></code></a> and
<a class="reference internal" href="../api/astropy.nddata.NDDataRef.html#astropy.nddata.NDDataRef" title="astropy.nddata.NDDataRef"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a>, that can be used to hold image data. They are
primarily of interest to those who may want to create their own image class by
subclassing from one of the classes in the <a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nddata</span></code></a> package. The main
differences between them are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/astropy.nddata.NDDataRef.html#astropy.nddata.NDDataRef" title="astropy.nddata.NDDataRef"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a> can be sliced and has methods for basic
arithmetic operations, but the user needs to use one of the uncertainty
classes to define an uncertainty. See <a class="reference internal" href="subclassing.html#nddataref"><span class="std std-ref">NDDataRef</span></a> for more detail.
Most of its properties must be set when the object is created because they
are not mutable.</p></li>
<li><p><a class="reference internal" href="../api/astropy.nddata.NDDataArray.html#astropy.nddata.NDDataArray" title="astropy.nddata.NDDataArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataArray</span></code></a> extends <a class="reference internal" href="../api/astropy.nddata.NDDataRef.html#astropy.nddata.NDDataRef" title="astropy.nddata.NDDataRef"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a> by adding
the methods necessary for it to behave like a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array in expressions
and adds setters for several properties. It lacks the ability to
automatically recognize and read data from FITS files and does not attempt
to automatically set the WCS property.</p></li>
<li><p><a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> extends <a class="reference internal" href="../api/astropy.nddata.NDDataArray.html#astropy.nddata.NDDataArray" title="astropy.nddata.NDDataArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataArray</span></code></a> by setting
up a default uncertainty class, setting up straightforward read/write to FITS
files, and automatically setting up a WCS property.</p></li>
</ul>
</div>
<div class="section" id="more-general-gridded-data-classes">
<h3>More General Gridded Data Classes<a class="headerlink" href="#more-general-gridded-data-classes" title="Permalink to this headline">¶</a></h3>
<p>There are two additional classes in the <code class="docutils literal notranslate"><span class="pre">nddata</span></code> package that are of
interest primarily to users who either need a custom image class that goes
beyond the classes discussed so far, or who are working with gridded data that
is not an image.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> is a container class for holding general gridded
data. It includes a handful of basic attributes, but no slicing or arithmetic.
More information about this class is in <a class="reference internal" href="nddata.html#nddata-details"><span class="std std-ref">NDData</span></a>.</p></li>
<li><p><a class="reference internal" href="../api/astropy.nddata.NDDataBase.html#astropy.nddata.NDDataBase" title="astropy.nddata.NDDataBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataBase</span></code></a> is an abstract base class that developers of new
gridded data classes can subclass to declare that the new class follows the
<a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> interface. More details are in
<a class="reference internal" href="subclassing.html#nddata-subclassing"><span class="std std-ref">Subclassing</span></a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="additional-examples">
<h2>Additional Examples<a class="headerlink" href="#additional-examples" title="Permalink to this headline">¶</a></h2>
<p>The list of packages below that use the <code class="docutils literal notranslate"><span class="pre">nddata</span></code> framework is intended to be
useful to either users writing their own image classes or those looking
for an image class that goes beyond what <a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> does.</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://sunpy.org/">SunPy project</a> uses <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> as the
foundation for its
<a class="reference external" href="https://docs.sunpy.org/en/stable/code_ref/map.html">Map classes</a>.</p></li>
<li><p>The class <a class="reference internal" href="../api/astropy.nddata.NDDataRef.html#astropy.nddata.NDDataRef" title="astropy.nddata.NDDataRef"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a> is used in
<a class="reference external" href="https://specutils.readthedocs.io/en/latest/">specutils</a> as the basis for
<a class="reference external" href="https://specutils.readthedocs.io/en/latest/api/specutils.Spectrum1D.html">Spectrum1D</a>, which adds several methods useful for
spectra.</p></li>
<li><p>The package <a class="reference external" href="https://ndmapper.readthedocs.io/en/latest/">ndmapper</a>, which
makes it easy to build reduction pipelines for optical data, uses
<a class="reference internal" href="../api/astropy.nddata.NDDataArray.html#astropy.nddata.NDDataArray" title="astropy.nddata.NDDataArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataArray</span></code></a> as its image object.</p></li>
<li><p>The package <a class="reference external" href="https://ccdproc.readthedocs.io/en/latest/">ccdproc</a> uses the
<a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a> class throughout for implementing optical/IR image
reduction.</p></li>
</ul>
</div>
<div class="section" id="using-nddata">
<h2>Using <code class="docutils literal notranslate"><span class="pre">nddata</span></code><a class="headerlink" href="#using-nddata" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ccddata.html">CCDData Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ccddata.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="ccddata.html#uncertainty">Uncertainty</a></li>
<li class="toctree-l2"><a class="reference internal" href="ccddata.html#arithmetic-with-images">Arithmetic with Images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Image Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="utils.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html#d-cutout-images">2D Cutout Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html#saving-a-2d-cutout-to-a-fits-file-with-an-updated-wcs">Saving a 2D Cutout to a FITS File with an Updated WCS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bitmask.html">Utility Functions for Handling Bit Masks and Mask Arrays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bitmask.html#creating-boolean-masks">Creating Boolean Masks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="decorator.html">Decorating Functions to Accept NDData Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="nddata.html">NDData</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#data">Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#mask">Mask</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#unit">Unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#uncertainties">Uncertainties</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#metadata">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#initialization-with-copy">Initialization with Copy</a></li>
<li class="toctree-l2"><a class="reference internal" href="nddata.html#converting-nddata-to-other-classes">Converting NDData to Other Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mixins/index.html">Mixins for Added Functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mixins/ndslicing.html">Slicing and Indexing NDData</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixins/ndarithmetic.html">NDData Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixins/ndio.html">I/O Mixin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="subclassing.html">Subclassing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="subclassing.html#nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="subclassing.html#nddataref"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="subclassing.html#nddatabase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataBase</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="subclassing.html#subclassing-nduncertainty">Subclassing <code class="xref py py-obj docutils literal notranslate"><span class="pre">NDUncertainty</span></code></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="performance-tips">
<span id="astropy-nddata-performance"></span><h2>Performance Tips<a class="headerlink" href="#performance-tips" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Using the uncertainty class <a class="reference internal" href="../api/astropy.nddata.VarianceUncertainty.html#astropy.nddata.VarianceUncertainty" title="astropy.nddata.VarianceUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VarianceUncertainty</span></code></a> will
be somewhat more efficient than the other two uncertainty classes,
<a class="reference internal" href="../api/astropy.nddata.InverseVariance.html#astropy.nddata.InverseVariance" title="astropy.nddata.InverseVariance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InverseVariance</span></code></a> and <a class="reference internal" href="../api/astropy.nddata.StdDevUncertainty.html#astropy.nddata.StdDevUncertainty" title="astropy.nddata.StdDevUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StdDevUncertainty</span></code></a>.
The latter two are converted to variance for the purposes of error
propagation and then converted from variance back to the original
uncertainty type. The performance difference should be small.</p></li>
<li><p>When possible, mask values by setting them to <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> and use the
<code class="docutils literal notranslate"><span class="pre">numpy</span></code> functions and methods that automatically exclude <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>,
like <code class="docutils literal notranslate"><span class="pre">np.nanmedian</span></code> and <code class="docutils literal notranslate"><span class="pre">np.nanstd</span></code>. This will typically be much
faster than using <a class="reference external" href="https://numpy.org/doc/stable/reference/maskedarray.baseclass.html#numpy.ma.MaskedArray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ma.MaskedArray</span></code></a>.</p></li>
</ul>
</div>
<div class="section" id="reference-api">
<h2>Reference/API<a class="headerlink" href="#reference-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-astropy.nddata">
<span id="astropy-nddata-package"></span><h3>astropy.nddata Package<a class="headerlink" href="#module-astropy.nddata" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.nddata</span></code></a> subpackage provides the <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a>
class and related tools to manage n-dimensional array-based data (e.g.
CCD images, IFU Data, grid-based simulation data, …). This is more than
just <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> objects, because it provides metadata that cannot
be easily provided by a single array.</p>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.add_array.html#astropy.nddata.add_array" title="astropy.nddata.add_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_array</span></code></a>(array_large, array_small, position)</p></td>
<td><p>Add a smaller array at a given position in a larger array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.bitfield_to_boolean_mask.html#astropy.nddata.bitfield_to_boolean_mask" title="astropy.nddata.bitfield_to_boolean_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bitfield_to_boolean_mask</span></code></a>(bitfield[, …])</p></td>
<td><p>Converts an array of bit fields to a boolean (or integer) mask array according to a bit mask constructed from the supplied bit flags (see <code class="docutils literal notranslate"><span class="pre">ignore_flags</span></code> parameter).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.block_reduce.html#astropy.nddata.block_reduce" title="astropy.nddata.block_reduce"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_reduce</span></code></a>(data, block_size[, func])</p></td>
<td><p>Downsample a data array by applying a function to local blocks.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.block_replicate.html#astropy.nddata.block_replicate" title="astropy.nddata.block_replicate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">block_replicate</span></code></a>(data, block_size[, conserve_sum])</p></td>
<td><p>Upsample a data array by block replication.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.extend_bit_flag_map.html#astropy.nddata.extend_bit_flag_map" title="astropy.nddata.extend_bit_flag_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extend_bit_flag_map</span></code></a>(cls_name[, base_cls])</p></td>
<td><p>A convenience function for creating bit flags maps by subclassing an existing map and adding additional flags supplied as keyword arguments.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.extract_array.html#astropy.nddata.extract_array" title="astropy.nddata.extract_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_array</span></code></a>(array_large, shape, position)</p></td>
<td><p>Extract a smaller array of the given shape and position from a larger array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.fits_ccddata_reader.html#astropy.nddata.fits_ccddata_reader" title="astropy.nddata.fits_ccddata_reader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fits_ccddata_reader</span></code></a>(filename[, hdu, unit, …])</p></td>
<td><p>Generate a CCDData object from a FITS file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.fits_ccddata_writer.html#astropy.nddata.fits_ccddata_writer" title="astropy.nddata.fits_ccddata_writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fits_ccddata_writer</span></code></a>(ccd_data, filename[, …])</p></td>
<td><p>Write CCDData object to FITS file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.interpret_bit_flags.html#astropy.nddata.interpret_bit_flags" title="astropy.nddata.interpret_bit_flags"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interpret_bit_flags</span></code></a>(bit_flags[, flip_bits, …])</p></td>
<td><p>Converts input bit flags to a single integer value (bit mask) or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.overlap_slices.html#astropy.nddata.overlap_slices" title="astropy.nddata.overlap_slices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">overlap_slices</span></code></a>(large_array_shape, …[, mode])</p></td>
<td><p>Get slices for the overlapping part of a small and a large array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.reshape_as_blocks.html#astropy.nddata.reshape_as_blocks" title="astropy.nddata.reshape_as_blocks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reshape_as_blocks</span></code></a>(data, block_size)</p></td>
<td><p>Reshape a data array into blocks.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.subpixel_indices.html#astropy.nddata.subpixel_indices" title="astropy.nddata.subpixel_indices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subpixel_indices</span></code></a>(position, subsampling)</p></td>
<td><p>Convert decimal points to indices, given a subsampling factor.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.support_nddata.html#astropy.nddata.support_nddata" title="astropy.nddata.support_nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">support_nddata</span></code></a>([_func, accepts, repack, …])</p></td>
<td><p>Decorator to wrap functions that could accept an NDData instance with its properties passed as function arguments.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="classes">
<h4>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h4>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.BitFlagNameMap.html#astropy.nddata.BitFlagNameMap" title="astropy.nddata.BitFlagNameMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BitFlagNameMap</span></code></a>()</p></td>
<td><p>A base class for bit flag name maps used to describe data quality (DQ) flags of images by provinding a mapping from a mnemonic flag name to a flag value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.CCDData.html#astropy.nddata.CCDData" title="astropy.nddata.CCDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code></a>(*args, **kwd)</p></td>
<td><p>A class describing basic CCD data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.Conf.html#astropy.nddata.Conf" title="astropy.nddata.Conf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Conf</span></code></a>()</p></td>
<td><p>Configuration parameters for <a class="reference internal" href="#module-astropy.nddata" title="astropy.nddata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.nddata</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.Cutout2D.html#astropy.nddata.Cutout2D" title="astropy.nddata.Cutout2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cutout2D</span></code></a>(data, position, size[, wcs, mode, …])</p></td>
<td><p>Create a cutout object from a 2D array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.FlagCollection.html#astropy.nddata.FlagCollection" title="astropy.nddata.FlagCollection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FlagCollection</span></code></a>(*args, **kwargs)</p></td>
<td><p>The purpose of this class is to provide a dictionary for containing arrays of flags for the <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> class.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.IncompatibleUncertaintiesException.html#astropy.nddata.IncompatibleUncertaintiesException" title="astropy.nddata.IncompatibleUncertaintiesException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IncompatibleUncertaintiesException</span></code></a></p></td>
<td><p>This exception should be used to indicate cases in which uncertainties with two different classes can not be propagated.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.InvalidBitFlag.html#astropy.nddata.InvalidBitFlag" title="astropy.nddata.InvalidBitFlag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InvalidBitFlag</span></code></a></p></td>
<td><p>Indicates that a value is not an integer that is a power of 2.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.InverseVariance.html#astropy.nddata.InverseVariance" title="astropy.nddata.InverseVariance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InverseVariance</span></code></a>([array, copy, unit])</p></td>
<td><p>Inverse variance uncertainty assuming first order Gaussian error propagation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.MissingDataAssociationException.html#astropy.nddata.MissingDataAssociationException" title="astropy.nddata.MissingDataAssociationException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MissingDataAssociationException</span></code></a></p></td>
<td><p>This exception should be used to indicate that an uncertainty instance has not been associated with a parent <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.NDArithmeticMixin.html#astropy.nddata.NDArithmeticMixin" title="astropy.nddata.NDArithmeticMixin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDArithmeticMixin</span></code></a>()</p></td>
<td><p>Mixin class to add arithmetic to an NDData object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a>(data[, uncertainty, mask, wcs, meta, …])</p></td>
<td><p>A container for <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>-based datasets, using the <a class="reference internal" href="../api/astropy.nddata.NDDataBase.html#astropy.nddata.NDDataBase" title="astropy.nddata.NDDataBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataBase</span></code></a> interface.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.NDDataArray.html#astropy.nddata.NDDataArray" title="astropy.nddata.NDDataArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataArray</span></code></a>(data, *args[, flags])</p></td>
<td><p>An <code class="docutils literal notranslate"><span class="pre">NDData</span></code> object with arithmetic.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.NDDataBase.html#astropy.nddata.NDDataBase" title="astropy.nddata.NDDataBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataBase</span></code></a>()</p></td>
<td><p>Base metaclass that defines the interface for N-dimensional datasets with associated meta information used in <code class="docutils literal notranslate"><span class="pre">astropy</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.NDDataRef.html#astropy.nddata.NDDataRef" title="astropy.nddata.NDDataRef"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDDataRef</span></code></a>(data[, uncertainty, mask, wcs, …])</p></td>
<td><p>Implements <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> with all Mixins.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.NDIOMixin.html#astropy.nddata.NDIOMixin" title="astropy.nddata.NDIOMixin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDIOMixin</span></code></a>()</p></td>
<td><p>Mixin class to connect NDData to the astropy input/output registry.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.NDSlicingMixin.html#astropy.nddata.NDSlicingMixin" title="astropy.nddata.NDSlicingMixin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDSlicingMixin</span></code></a>()</p></td>
<td><p>Mixin to provide slicing on objects using the <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a> interface.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.NDUncertainty.html#astropy.nddata.NDUncertainty" title="astropy.nddata.NDUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDUncertainty</span></code></a>([array, copy, unit])</p></td>
<td><p>This is the metaclass for uncertainty classes used with <a class="reference internal" href="../api/astropy.nddata.NDData.html#astropy.nddata.NDData" title="astropy.nddata.NDData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NDData</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.NoOverlapError.html#astropy.nddata.NoOverlapError" title="astropy.nddata.NoOverlapError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NoOverlapError</span></code></a></p></td>
<td><p>Raised when determining the overlap of non-overlapping arrays.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.PartialOverlapError.html#astropy.nddata.PartialOverlapError" title="astropy.nddata.PartialOverlapError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PartialOverlapError</span></code></a></p></td>
<td><p>Raised when arrays only partially overlap.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.StdDevUncertainty.html#astropy.nddata.StdDevUncertainty" title="astropy.nddata.StdDevUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StdDevUncertainty</span></code></a>([array, copy, unit])</p></td>
<td><p>Standard deviation uncertainty assuming first order gaussian error propagation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.UnknownUncertainty.html#astropy.nddata.UnknownUncertainty" title="astropy.nddata.UnknownUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">UnknownUncertainty</span></code></a>([array, copy, unit])</p></td>
<td><p>This class implements any unknown uncertainty type.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.VarianceUncertainty.html#astropy.nddata.VarianceUncertainty" title="astropy.nddata.VarianceUncertainty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">VarianceUncertainty</span></code></a>([array, copy, unit])</p></td>
<td><p>Variance uncertainty assuming first order Gaussian error propagation.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="module-astropy.nddata.bitmask">
<span id="astropy-nddata-bitmask-module"></span><h3>astropy.nddata.bitmask Module<a class="headerlink" href="#module-astropy.nddata.bitmask" title="Permalink to this headline">¶</a></h3>
<p>A module that provides functions for manipulating bit masks and data quality
(DQ) arrays.</p>
<div class="section" id="id4">
<h4>Functions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.bitmask.bitfield_to_boolean_mask.html#astropy.nddata.bitmask.bitfield_to_boolean_mask" title="astropy.nddata.bitmask.bitfield_to_boolean_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bitfield_to_boolean_mask</span></code></a>(bitfield[, …])</p></td>
<td><p>Converts an array of bit fields to a boolean (or integer) mask array according to a bit mask constructed from the supplied bit flags (see <code class="docutils literal notranslate"><span class="pre">ignore_flags</span></code> parameter).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.bitmask.interpret_bit_flags.html#astropy.nddata.bitmask.interpret_bit_flags" title="astropy.nddata.bitmask.interpret_bit_flags"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interpret_bit_flags</span></code></a>(bit_flags[, flip_bits, …])</p></td>
<td><p>Converts input bit flags to a single integer value (bit mask) or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.bitmask.extend_bit_flag_map.html#astropy.nddata.bitmask.extend_bit_flag_map" title="astropy.nddata.bitmask.extend_bit_flag_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extend_bit_flag_map</span></code></a>(cls_name[, base_cls])</p></td>
<td><p>A convenience function for creating bit flags maps by subclassing an existing map and adding additional flags supplied as keyword arguments.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h4>Classes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.bitmask.BitFlagNameMap.html#astropy.nddata.bitmask.BitFlagNameMap" title="astropy.nddata.bitmask.BitFlagNameMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BitFlagNameMap</span></code></a>()</p></td>
<td><p>A base class for bit flag name maps used to describe data quality (DQ) flags of images by provinding a mapping from a mnemonic flag name to a flag value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.bitmask.InvalidBitFlag.html#astropy.nddata.bitmask.InvalidBitFlag" title="astropy.nddata.bitmask.InvalidBitFlag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InvalidBitFlag</span></code></a></p></td>
<td><p>Indicates that a value is not an integer that is a power of 2.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="module-astropy.nddata.utils">
<span id="astropy-nddata-utils-module"></span><h3>astropy.nddata.utils Module<a class="headerlink" href="#module-astropy.nddata.utils" title="Permalink to this headline">¶</a></h3>
<p>This module includes helper functions for array operations.</p>
<div class="section" id="id6">
<h4>Functions<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.extract_array.html#astropy.nddata.utils.extract_array" title="astropy.nddata.utils.extract_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_array</span></code></a>(array_large, shape, position)</p></td>
<td><p>Extract a smaller array of the given shape and position from a larger array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.add_array.html#astropy.nddata.utils.add_array" title="astropy.nddata.utils.add_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_array</span></code></a>(array_large, array_small, position)</p></td>
<td><p>Add a smaller array at a given position in a larger array.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.subpixel_indices.html#astropy.nddata.utils.subpixel_indices" title="astropy.nddata.utils.subpixel_indices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subpixel_indices</span></code></a>(position, subsampling)</p></td>
<td><p>Convert decimal points to indices, given a subsampling factor.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.overlap_slices.html#astropy.nddata.utils.overlap_slices" title="astropy.nddata.utils.overlap_slices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">overlap_slices</span></code></a>(large_array_shape, …[, mode])</p></td>
<td><p>Get slices for the overlapping part of a small and a large array.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h4>Classes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.NoOverlapError.html#astropy.nddata.utils.NoOverlapError" title="astropy.nddata.utils.NoOverlapError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NoOverlapError</span></code></a></p></td>
<td><p>Raised when determining the overlap of non-overlapping arrays.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.PartialOverlapError.html#astropy.nddata.utils.PartialOverlapError" title="astropy.nddata.utils.PartialOverlapError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PartialOverlapError</span></code></a></p></td>
<td><p>Raised when arrays only partially overlap.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astropy.nddata.utils.Cutout2D.html#astropy.nddata.utils.Cutout2D" title="astropy.nddata.utils.Cutout2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cutout2D</span></code></a>(data, position, size[, wcs, mode, …])</p></td>
<td><p>Create a cutout object from a 2D array.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">N-Dimensional Datasets (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astropy.nddata</span></code>)</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#nddata">NDData</a></li>
<li><a class="reference internal" href="#nddataref">NDDataRef</a></li>
<li><a class="reference internal" href="#working-with-two-dimensional-data-like-images">Working with Two-Dimensional Data Like Images</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ccddata-class-for-images"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CCDData</span></code> Class for Images</a></li>
<li><a class="reference internal" href="#slicing">Slicing</a></li>
<li><a class="reference internal" href="#image-arithmetic-including-uncertainty">Image Arithmetic, Including Uncertainty</a><ul>
<li><a class="reference internal" href="#id1">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reading-and-writing">Reading and Writing</a></li>
<li><a class="reference internal" href="#image-utilities">Image Utilities</a><ul>
<li><a class="reference internal" href="#cutouts">Cutouts</a><ul>
<li><a class="reference internal" href="#id3">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#image-resizing">Image Resizing</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#other-image-classes">Other Image Classes</a></li>
<li><a class="reference internal" href="#more-general-gridded-data-classes">More General Gridded Data Classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-examples">Additional Examples</a></li>
<li><a class="reference internal" href="#using-nddata">Using <code class="docutils literal notranslate"><span class="pre">nddata</span></code></a></li>
<li><a class="reference internal" href="#performance-tips">Performance Tips</a></li>
<li><a class="reference internal" href="#reference-api">Reference/API</a><ul>
<li><a class="reference internal" href="#module-astropy.nddata">astropy.nddata Package</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-astropy.nddata.bitmask">astropy.nddata.bitmask Module</a><ul>
<li><a class="reference internal" href="#id4">Functions</a></li>
<li><a class="reference internal" href="#id5">Classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-astropy.nddata.utils">astropy.nddata.utils Module</a><ul>
<li><a class="reference internal" href="#id6">Functions</a></li>
<li><a class="reference internal" href="#id7">Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/nddata/index.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011–2022, The Astropy Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.5.4. &nbsp;
    Last built 09 May 2022. <br/>
  </p>
</footer>
  </body>
</html>